<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Kiwi TCMS - Articles by Alexander Todorov</title>
        <meta name="viewport" content="width=device-width,initial-scale=1">
    
    <meta property="og:title" content="Kiwi TCMS - Articles by Alexander Todorov">
    <meta property="og:type" content="profile">
    <meta property="profile:first_name" content="Alexander">
    <meta property="profile:last_name" content="Todorov">
    <meta property="profile:username" content="atodorov">
        <!-- Custom Styles -->
        <link href="/theme/style/style.css" rel="stylesheet">
        <link href="/theme/style/responsive-1440.css" rel="stylesheet">
        <link href="/theme/style/responsive-1024.css" rel="stylesheet">
        <link href="/theme/style/responsive-768.css" rel="stylesheet">
        <link href="/theme/style/responsive-micro.css" rel="stylesheet">
        <link href="/theme/style/github.css" rel="stylesheet">
    </head>
    <body class="">

        <nav id="main-nav">
            <a href="/" style="display:inherit;">
                <img src="/theme/images/Kiwi-TCMS-logo-header.svg" alt="Kiwi TCMS Logo">
            </a>
            <i class="las la-bars" title="Open menu" onclick="toggle('hidden-menu', 'visible')" style="align-self: center;"></i>
            <ul class="hidden-menu" id="hidden-menu">
                <a href="/">
                    <img src="/theme/images/Kiwi-TCMS-logo-header.svg" alt="Kiwi TCMS Logo">
                </a>
                <i class="las la-times" title="Close" onclick="toggle('hidden-menu', 'visible')"></i>
<li>
    <a href="/features/" >Features</a>
</li>
<li>
    <a href="http://kiwitcms.readthedocs.io"">Documentation</a>
</li>
<li>
    <a href="/community/" >Community</a>
</li>
<li>
    <a href="/support/" >Support</a>
</li>
<li>
    <a href="/blog/" class="active">Blog</a>
</li>
<li>
    <a href="/team/" >Team</a>
</li>            </ul>

            <ul>
<li>
    <a href="/features/" >Features</a>
</li>
<li>
    <a href="http://kiwitcms.readthedocs.io"">Documentation</a>
</li>
<li>
    <a href="/community/" >Community</a>
</li>
<li>
    <a href="/support/" >Support</a>
</li>
<li>
    <a href="/blog/" class="active">Blog</a>
</li>
<li>
    <a href="/team/" >Team</a>
</li>                <li>
                    <div class="drop-btn" id="nav-drop"
                        onmouseenter="toggle('nav-drop','drop-down');"
                        onmouseleave="toggle('nav-drop','drop-down');"
                    >
                        <div class="btn" icon>Get Started <i></i></div>
                        <!-- WARNING: this menu needs to be copied everywhere where we have this
                            button b/c Pelican doesn't support includes from HTML content files:
                            https://github.com/getpelican/pelican/issues/2783
                        -->
                        <div class="drop-cnt">
                            <a href="https://public.tenant.kiwitcms.org">Explore latest version</a>
                            <a href="/#pricing">Explore subscriptions</a>
                            <a href="https://kiwitcms.readthedocs.io/en/latest/installing_docker.html">Run as Docker container</a>
                            <a href="https://github.com/apps/kiwi-tcms/">Integration with GitHub</a>
                        </div>
                    </div>
                </li>
            </ul>
        </nav>

        <!-- content -->
<section id="blog-list">
    <h1>Articles by Alexander Todorov</h1>

    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2020/07/11/customize-the-information-used-for-1-click-bug-reports/" rel="bookmark" title="Permalink to Customize the information used for 1-click bug reports">
                <h1 class="top-header">Customize the information used for 1-click bug reports</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Sat 11 July 2020
            </p>
        </div>

        <div class="content">
            <p>Kiwi TCMS integration with 3rd party bug trackers supports the
<em>1-click bug report</em> feature.
However you may want to change how the initial information is structured or
even what exactly is written in the initial comment. This article
shows how to do this.</p>
<p>The default text used for 1-click bug reports gets compiled based on
information present in the TestExecution - Product, Version, TestCase.text,
etc. This is encapsulated in the
<code>tcms.issuetracker.base.IssueTrackerType._report_comment()</code> method.
You may extend the existing bug tracker integration code
with your own customizations. In this example I've extended the
<code>KiwiTCMS</code> bug tracker implementation but you can provide your own from
scratch</p>
<div class="highlight"><pre><span></span><code><span class="c1"># filename: mymodule.py</span>
<span class="k">class</span> <span class="nc">ExtendedBugTracker</span><span class="p">(</span><span class="n">KiwiTCMS</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_report_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">execution</span><span class="p">):</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_report_comment</span><span class="p">(</span><span class="n">execution</span><span class="p">)</span>

        <span class="n">comment</span> <span class="o">+=</span> <span class="s2">&quot;----- ADDITIONAL INFORMATION -----</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="c1">#</span>
        <span class="c1"># fetch more info from other sources</span>
        <span class="c1">#</span>
        <span class="n">comment</span> <span class="o">+=</span> <span class="s2">&quot;----- END ADDITIONAL INFORMATION -----</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">comment</span>
</code></pre></div>


<p>Then override the <code>EXTERNAL_BUG_TRACKERS</code> setting to include your customizations:</p>
<div class="highlight"><pre><span></span><code><span class="n">EXTERNAL_BUG_TRACKERS</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;mymodule.ExtendedBugTracker&#39;</span><span class="p">)</span>
</code></pre></div>


<p>and change the bug tracker type, via https://tcms.example.com/admin/testcases/bugsystem/,
to <em>mymodule.ExtendedBugTracker</em>.</p>
<p><strong>IMPORTANT</strong></p>
<ul>
<li>Information how to change settings can be found
  <a href="https://kiwitcms.readthedocs.io/en/latest/installing_docker.html#customization">here</a></li>
<li><code>mymodule.py</code> may live anywhere on the filesystem but Python must be
  able to import it</li>
<li>It is best to bundle all of your customizations into a Python package and
  <code>pip3 install</code> it into your customized docker image</li>
<li>API documentation for bug tracker integration can be found
  <a href="https://kiwitcms.readthedocs.io/en/latest/modules/tcms.issuetracker.html">here</a></li>
<li>Rebuilding the docker image is outside the scope of this article. Have a look
  at this
  <a href="https://github.com/MrSenko/kiwitcms-enterprise/blob/master/Dockerfile">Dockerfile</a>
  for inspiration</li>
</ul>
<p>Happy testing!</p>
        </div>
    </article>
    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2020/02/11/i-deleted-our-newsletter-from-mailchimp-please-re-subscribe/" rel="bookmark" title="Permalink to I deleted our newsletter from Mailchimp ! Please re-subscribe">
                <h1 class="top-header">I deleted our newsletter from Mailchimp ! Please re-subscribe</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Tue 11 February 2020
            </p>
        </div>

        <div class="content">
            <p>Hello testers,
I have to admit that I made a rookie mistake and deleted the entire email database
for the Kiwi TCMS
<a href="https://kiwitcms.us17.list-manage.com/subscribe/post?u=9b57a21155a3b7c655ae8f922&amp;id=c970a37581">newsletter</a>!
And of course we didn't have a backup of this database :-(. Please
<a href="https://kiwitcms.us17.list-manage.com/subscribe/post?u=9b57a21155a3b7c655ae8f922&amp;id=c970a37581">re-subscribe here</a>
and read below if you are interested to know what happened.</p>
<p>Last week, while exploring how to cancel active subscriptions for our
deprecated GitHub Marketplace listing I found there is no way to cancel
those programatically. So I've compiled a list of email addresses and decided
to send subscribers an email asking them to cancel their subscriptions.</p>
<p>For this purpose I decided to import the contacts into Mailchimp because
it gives you a better interface to design the actual message, include images
in the message body, preview and test the message before it is sent! The import
of addresses went fine, new addresses were tagged appropriately to separate them
from the rest of the newsletter audience <strong>but</strong> they were not subscribed to
receive emails automatically.</p>
<p>I selected "non-subscribed" option when importing as a second barrier to
accidentally emailing people who do not want to receive regular news from us!
However it turned out Mailchimp can't send messages to non-subscribed addresses!
Maybe that's part of their attempts to be GDPR compliant.</p>
<p>So I decided to delete the freshly imported addresses, import them again
and this time tag + subscribe them during the import! When selecting the addresses
for deletion I am 99% confident I did filter them by tag first and then selected
<strong>DELETE</strong>! And the entire contacts list was gone!</p>
<p>I've also contacted Mailchimp immediately to ask whether or not the addresses
can be restored. Unfortunately they are trying to be super GDPR compliant and
claim they don't have this information into their system anymore.
And in this particular case we've been relying on the vendor to keep backups
on their end so didn't even think about trying to backup this database!</p>
<p>For users who have accounts at
<a href="https://public.tenant.kiwitcms.org">https://public.tenant.kiwitcms.org</a>
we do have
their email addresses but we're not going to automatically re-subscribe them.
We've stopped auto-subscribing
<a href="/blog/kiwi-tcms-team/2018/06/24/kiwi-tcms-42/">2 years ago</a> and also there's
no way of telling which addresses were on the list in the first hand.</p>
<p>Please
<a href="https://kiwitcms.us17.list-manage.com/subscribe/post?u=9b57a21155a3b7c655ae8f922&amp;id=c970a37581">re-subscribe here</a>
and I promise we're going to start backing up the newsletter database as well.</p>
<p>Thank you!</p>
        </div>
    </article>
    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2020/01/17/project-roadmap-2020/" rel="bookmark" title="Permalink to Project roadmap 2020">
                <h1 class="top-header">Project roadmap 2020</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Fri 17 January 2020
            </p>
        </div>

        <div class="content">
            <p>Hello testers,
the Kiwi TCMS team sat down together last week and talked about what we feel
is important for us during the upcoming year. This blog post outlines our
roadmap for 2020!</p>
<p><img style="background-color: inherit" src="/images/roadmap2020.png" alt="roadmap image 2020"></p>
<h1>Project sustainability</h1>
<p>The big goal towards which we are striving is to turn Kiwi TCMS into a
sustainable open source project. For now this means several key areas:</p>
<div class="highlight"><pre><span></span><code><span class="err">1) Team</span>
<span class="err">2) Technical</span>
<span class="err">3) Community</span>
</code></pre></div>


<h2>Team</h2>
<p>Right now we have a core team with 6 newcomers on-boarding.
Engineering performance is all over the place with some people contributing
too much while others contributing too little. More importantly there is no
consistent pace of contributions which makes planning timely completion of
technical tasks impossible.</p>
<p>At the moment we do operate as a bunch of disconnected people who happen to
talk to each other from time to time.</p>
<p>We are going to adjust our internal processes and how we on-board new members.
In fact we did our first "scrum-like" meeting this week and agreed to change
our existing practice and strive to become better as a team!</p>
<p><strong>Goal:</strong> to have a cohesive team at the end of the year which operates with
a predictable capacity.</p>
<p><strong>Goal:</strong> 1 PR/week/person as broad measure of individual performance.</p>
<h2>Technical</h2>
<p>The areas shown on the picture above will receive more priority.</p>
<p><strong>Goal:</strong> complete remaining <a href="/blog/kiwi-tcms-team/2019/03/03/legacy-reports-become-telemetry/">Telemetry features</a>.</p>
<p><strong>Goal:</strong> complete
<a href="https://github.com/kiwitcms/Kiwi/milestone/1">bug-tracker integration milestone</a>.</p>
<p><strong>Goal:</strong> all pylint issues resolved.</p>
<p><strong>Goal:</strong> migrate all remaining legacy templates to Patternfly UI. See
<a href="https://github.com/kiwitcms/Kiwi/milestone/3">patternfly-migration</a> milestone.</p>
<p><strong>Goal:</strong> where FE sends AJAX requests to BE views replace with JSON RPC API instead.</p>
<p><strong>Extra:</strong> start tackling the JavaScript mess that we have. This depends and is related
to Patternfly migration and overall refactoring.</p>
<p><strong>Extra:</strong> make it easier for downstream installations to extend and override parts
of Kiwi TCMS in order for users to adjust the system to their own needs.
The system is pretty flexible as-is but there have been requests,
both online and offline, to provide some extra features! We'll start looking
into them, likely making partial progress in the next 12 months.</p>
<h2>Community</h2>
<p>Last year Kiwi TCMS had massive success at every single conference that we've been to.
Both project and team have been well received. While we are going to continue
being part of various communities around the world we are trying to limit
extensive travel and focus on functionality and partnerships which will
increase Kiwi TCMS eco-system, make the project even more popular and
drive further adoption!</p>
<p><strong>Goal:</strong> extended GitHub integration via
<a href="https://github.com/kiwitcms/github-app/">kiwitcms-github-app</a> plugin.</p>
<p><strong>Goal:</strong> release the following
<a href="https://kiwitcms.readthedocs.io/en/latest/plugins/automation-frameworks.html">test automation framework plugins</a>
for Kiwi TCMS:</p>
<ul>
<li><a href="https://github.com/kiwitcms/phpunit-plugin/">PHPUnit plugin</a></li>
<li><a href="https://github.com/kiwitcms/pytest-plugin/">py.test plugin</a></li>
<li>TestNG plugin</li>
<li>Jenkins plugin</li>
<li>Robot framework plugin</li>
<li>Django plugin</li>
</ul>
<p>For more information see
<a href="https://github.com/kiwitcms/Kiwi/milestone/2">test-automation-plugins</a> milestone.</p>
<p><strong>Ongoing:</strong> work with our partners from the proprietary and open source worlds.
This is hard to quantify and lots of it doesn't actually depend on the team.
However we are continuing to talk to them regularly. Expect new feedback to
become available under GitHub Issues.</p>
<p><strong>Extra:</strong> see what we can do about testing productivity! This has always been
part of our mission but we have not been able to produce anything worth sharing.
We do have ideas in this space but we are generally looking for partnerships and collaborations.
It is very likely that there will not be very much progress on this front
because it is hard to define it properly :-(.</p>
<h2>Summary</h2>
<p>At the end of the day most of these goals compliment each other and help drive all of
them to completion. Many of the still on-boarding people have expressed desire to
improve their Python &amp; Django skills. Working to resolve issues in the above specific
areas will give them this opportunity! I expect they will show good progress on their respective
tasks so we can write more about them on this blog.</p>
<p>Happy testing!</p>
        </div>
    </article>
    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2019/12/26/roadmap-status-report-for-2019/" rel="bookmark" title="Permalink to Roadmap status report for 2019">
                <h1 class="top-header">Roadmap status report for 2019</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Thu 26 December 2019
            </p>
        </div>

        <div class="content">
            <p>Hello everyone, in this article I will outline the progress that the Kiwi TCMS
team has made towards achieving the goals on our
<a href="/blog/atodorov/2019/01/10/project-mission-and-goals-for-2019/">2019 roadmap</a>.
TL,DR: last year we've made lots of big and visible changes in Kiwi TCMS.
This year less so. Progress has been slower than before and not so much
visible. Community and team is growing. More contributors are welcome.</p>
<h2>Complete the internal refactoring</h2>
<p><em>Status: small progress, needs help</em></p>
<p><a href="https://codeclimate.com/github/kiwitcms/Kiwi">CodeClimate</a> progress is:</p>
<ul>
<li>-60 code smells</li>
<li>-55 duplications</li>
<li>-50 other issues</li>
<li>4.4% technical debt improvement</li>
<li>-240 hrs remaining until issues are fixed</li>
</ul>
<p>The trend is showing less issues remaining
but it has been a slow progress. As we fix the easier items the remaining ones
become harder to deal with.</p>
<p>We've done minor work related to fixing issues reported by pylint. Around
150 of them still remain!</p>
<p>We have not done any targeted work to resolve other issues reported by Scrutinizer,
remove vendored-in JavaScript libraries, JavaScript refactoring or
classification of issues in 3rd party dependencies.</p>
<h2>Redesign the UI templates with the help of Patternfly</h2>
<p><em>Status: 60% done, needs help</em></p>
<p>There are 22 HTML templates remaining to be redesigned (from 59). That's mostly
due to internal cleanup and some refactoring! Test plan and Test run pages are the
two major templates that still need to be redesigned with Patternfly.</p>
<h2>Modernize reporting aka Telemetry</h2>
<p><em>Status: 60% done, in progress, behind schedule</em></p>
<p>The specs for the new <a href="/blog/kiwi-tcms-team/2019/03/03/legacy-reports-become-telemetry/">Telemetry</a> system
have been defined after taking into account feedback on GitHub issues. Anton Sankov is
the leading developer for this feature. So far we have 4 telemetry reports merged:
testing break-down, status matrix, execution trends and flaky tests.</p>
<p>There are lots of minor issues or missing functionality in these first iterations
(compared to specification). Work continues on the other telemetry use-cases
and related items.</p>
<h2>Plugins for 3rd party test automation frameworks</h2>
<p><em>Status: good, needs help</em></p>
<p><em>UPDATE:</em> no change in last 6 months.</p>
<p>If you'd like to see plugins for more test automation frameworks
and/or file formats please checkout the
<a href="https://kiwitcms.readthedocs.io/en/latest/automation-frameworks.html">documentation</a>
for links and more info.</p>
<h2>Redefine bug-tracker integration</h2>
<p><em>Status: 66% complete, in progress, behind schedule</em></p>
<p>We've been making slow progress on this milestone lately. For more info
see
<a href="https://github.com/kiwitcms/Kiwi/milestone/1">https://github.com/kiwitcms/Kiwi/milestone/1</a></p>
<h2>GitHub flow integration</h2>
<p><em>Status: done, awaiting deployment</em></p>
<p>Our team spent some time making Kiwi TCMS the first open source TCMS available
on the <a href="https://github.com/marketplace/kiwi-tcms">GitHub Marketplace</a>. At the end
of this year we were able to create a small application that allows further
integration and extending the testing workflow to the GitHub platform.</p>
<p>This is waiting on a few more clarifications from GitHub before we deploy but
for now it can be considered as done. Future functionality will be tracked
and developed directly at
<a href="https://github.com/kiwitcms/github-app/issues">https://github.com/kiwitcms/github-app/issues</a>.</p>
<h2>Agile integration with Trello</h2>
<p><em>Status: no progress, will drop</em></p>
<p>This will be dropped from roadmap for the next year until we can get more interest
from the community.</p>
<h2>Improve engineering productivity</h2>
<p><em>Status: no progress</em></p>
<p>Looking for external help here. This will stay as a low priority item on our
roadmap for 2020 until we can free more resources on the team.</p>
<h2>Community</h2>
<p><em>Status: great, on track, needs work</em></p>
<p>This is our strongest area during this year. We have a strong presence in
multiple communities, our event schedule is very busy and we are gaining more
recognition every day! Core team hit several big bumps this year and is still
recovering with a few more people onboarding.</p>
<p>Kiwi TCMS suffers from the problem that many of our users can't be contributors
or simply don't want to!</p>
<p>In short: it is important for us to follow our mission and develop our core team
so we can deliver on promises made in our roadmap! That requires a lot of time and
effort which reduces short-term productivity.</p>
<p>Happy testing!</p>
        </div>
    </article>
    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2019/11/11/how-to-override-bug-details-in-kiwi-tcms/" rel="bookmark" title="Permalink to How to override bug details in Kiwi TCMS">
                <h1 class="top-header">How to override bug details in Kiwi TCMS</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Mon 11 November 2019
            </p>
        </div>

        <div class="content">
            <p>Starting with version 7.0 Kiwi TCMS pages displaying URLs to bugs also
contain an info icon which shows additional information as tooltip. These
are designed to provide more contextual information about the bug. By default
the tooltip shows the OpenGraph metadata for that URL. This article
will explain how to override this in 2 different ways.</p>
<p><img src="/images/testcase_shows_bug_details.png" alt="bug details shown" style="float:none"></p>
<h2>Option #1: using the caching layer</h2>
<p>Additional bug information is cached on the application layer. The cache
key is the bug URL! By default Kiwi TCMS uses local-memory caching which
isn't accessible for external processes but can be reconfigured very easily.
This example changes the <code>CACHES</code> setting to use a directory on the
file system like so</p>
<div class="highlight"><pre><span></span><code><span class="n">CACHES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;BACKEND&#39;</span><span class="p">:</span> <span class="s1">&#39;django.core.cache.backends.filebased.FileBasedCache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LOCATION&#39;</span><span class="p">:</span> <span class="s1">&#39;/tmp/kiwi-cache&#39;</span><span class="p">,</span>
        <span class="s1">&#39;TIMEOUT&#39;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>


<p>Then you need to poll your 3rd party bug tracker (and/or other systems) and
update the cache for each URL</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">django.core.cache</span> <span class="kn">import</span> <span class="n">cache</span>
<span class="kn">from</span> <span class="nn">tcms.core.contrib.linkreference.models</span> <span class="kn">import</span> <span class="n">LinkReference</span>

<span class="k">for</span> <span class="n">reference</span> <span class="ow">in</span> <span class="n">LinkReference</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_defect</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="c1"># possibly filter objects coming only from your own bug tracker</span>
    <span class="c1"># in case there are multiple trackers in use</span>

    <span class="c1"># custom methods to grab more information. Must return strings</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">fetch_title_from_bug_tracker</span><span class="p">(</span><span class="n">reference</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">fetch_description_from_bug_tracker</span><span class="p">(</span><span class="n">reference</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>

    <span class="c1"># store the information in Kiwi TCMS cache</span>
    <span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">reference</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="n">description</span><span class="p">})</span>
</code></pre></div>


<p>Then execute the Python script above regularly. For example use the following
as your cron script</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="nb">export</span> <span class="nv">VIRTUAL_ENV</span><span class="o">=</span>/venv
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/venv/bin:<span class="si">${</span><span class="nv">PATH</span><span class="si">}</span>
cat /path/to/cache_updater.py <span class="p">|</span> /Kiwi/manage.py shell
</code></pre></div>


<p><img src="/images/testcase_shows_bug_details_cache.png" alt="bug details from customized cache" style="float:none"></p>
<p><strong>IMPORTANT</strong></p>
<ul>
<li>Kiwi TCMS expires cache entries after an hour. Either change
  the <code>TIMEOUT</code> setting shown above or run your script more frequently</li>
<li>How to modify default Kiwi TCMS settings is documented
  <a href="https://kiwitcms.readthedocs.io/en/latest/installing_docker.html#customization">here</a></li>
<li>The Python + Bash scripts above don't need to be on the same system where Kiwi TCMS
  is hosted. However they need the same Python 3 virtualenv and cache settings as
  Kiwi TCMS does</li>
<li>Information about Django's cache framework and available backends
  can be found <a href="https://docs.djangoproject.com/en/2.2/topics/cache/">here</a></li>
<li><code>memcached</code> is a supported cache backend option, see
  <a href="https://docs.djangoproject.com/en/2.2/topics/cache/#memcached">here</a></li>
<li><a href="https://pypi.org/project/django-elasticache/">django-elasticache</a> is a
  backend for Amazon ElastiCache which provides several configuration examples</li>
<li>Both <a href="https://github.com/niwinz/django-redis">django-redis</a> and
  <a href="https://github.com/sebleier/django-redis-cache">django-redis-cache</a> are good
  libraries which support Redis</li>
<li>Any 3rd party libraries must be <code>pip3 install</code>-ed into your own docker image</li>
</ul>
<h2>Option #2: extend bug tracker integration</h2>
<p>Let's say you are already running a customized Docker image of Kiwi TCMS. Then
you may opt-in to extend the existing bug tracker integration code which provides
the information shown in the tooltip. In this example I've extended the
<code>KiwiTCMS</code> bug tracker implementation but you can even provide your own from
scratch</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ExtendedBugTracker</span><span class="p">(</span><span class="n">KiwiTCMS</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">details</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

        <span class="n">result</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;EXTENDED: &#39;</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
        <span class="n">result</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;&lt;h1&gt;IMPORTANT&lt;/h1&gt;&#39;</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>


<p>Then import the new <code>ExtendedBugTracker</code> class inside
<code>tcms/issuetracker/types.py</code> like so</p>
<div class="highlight"><pre><span></span><code><span class="gh">index 9ad90ac..2c76621 100644</span>
<span class="gd">--- a/tcms/issuetracker/types.py</span>
<span class="gi">+++ b/tcms/issuetracker/types.py</span>
<span class="gu">@@ -17,6 +17,9 @@ from django.conf import settings</span>

 from tcms.issuetracker.base import IssueTrackerType
 from tcms.issuetracker.kiwitcms import KiwiTCMS  # noqa
<span class="gi">+from tcms.issuetracker.kiwitcms import ExtendedBugTracker</span>
</code></pre></div>


<p>and change the bug tracker type, via https://tcms.example.com/admin/testcases/bugsystem/,
to <em>ExtendedBugTracker</em>.</p>
<p><img src="/images/testcase_shows_bug_details_extended.png" alt="bug details extended internally" style="float:none"></p>
<p><strong>IMPORTANT</strong></p>
<ul>
<li><em>ExtendedBugTracker</em> may live anywhere on the filesystem but Python must be
  able to import it</li>
<li>It is best to bundle all of your customizations into a Python package and
  <code>pip3 install</code> it into your customized docker image</li>
<li><em>ExtendedBugTracker</em> must be imported into <code>tcms/issuetracker/types.py</code> in order
  for the admin interface and other functions to find it. You may also place the
  import at the bottom of <code>tcms/issuetracker/types.py</code></li>
<li>API documentation for bug tracker integration can be found
  <a href="https://kiwitcms.readthedocs.io/en/latest/modules/tcms.issuetracker.html">here</a></li>
<li>Rebuilding the docker image is outside the scope of this article. Have a look
  at this
  <a href="https://github.com/MrSenko/kiwitcms-enterprise/blob/master/Dockerfile">Dockerfile</a>
  for inspiration</li>
</ul>
<p><strong>NOTE:</strong> starting with <a href="/blog/kiwi-tcms-team/2020/07/10/kiwi-tcms-85/">Kiwi TCMS v8.5</a>
external bug tracker integration classes are listed in the <code>EXTERNAL_BUG_TRACKERS</code>
setting. If you are using v8.5 or newer instead of
importing <code>ExtendedBugTracker</code> in <code>tcms/issuetracker/types.py</code> you should
override the list of available bug tracker integrations:</p>
<div class="highlight"><pre><span></span><code><span class="n">EXTERNAL_BUG_TRACKERS</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;mymodule.ExtendedBugTracker&#39;</span><span class="p">)</span>
</code></pre></div>


<p>Happy testing!</p>
        </div>
    </article>
    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2019/06/28/mid-year-roadmap-status-report/" rel="bookmark" title="Permalink to Mid-year roadmap status report">
                <h1 class="top-header">Mid-year roadmap status report</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Fri 28 June 2019
            </p>
        </div>

        <div class="content">
            <p>Hello everyone, in this article I will outline the progress that the Kiwi TCMS
team has made towards achieving the goals on our
<a href="/blog/atodorov/2019/01/10/project-mission-and-goals-for-2019/">2019 mission and roadmap</a>.
TL,DR: Kiwi TCMS has made progress since January, it's been tough and may not have been
very visible. I feel like we've been behind schedule till now! The greatest
positive thing has been community and team development!</p>
<h2>Complete the internal refactoring</h2>
<p><em>Status: minimal progress, needs help</em></p>
<p><a href="https://codeclimate.com/github/kiwitcms/Kiwi">CodeClimate</a> progress is:</p>
<ul>
<li>-30 code smells</li>
<li>-40 duplications</li>
<li>-30 other issues</li>
<li>4% technical debt improvement</li>
<li>-200 hrs remaining until issues are fixed</li>
</ul>
<p>This is mostly the result of code reviews and minor fixes, not targeted work.</p>
<p>We have not done any targeted work to resolve other issues reported by Scrutinizer,
Pylint, remove vendored-in JavaScript libraries, JavaScript refactoring or
classification of issues in 3rd party dependencies.</p>
<p>There are new people onboarding in the team right now and our plan is for
them to start grinding at these issues very soon!</p>
<h2>Redesign the UI templates with the help of Patternfly</h2>
<p><em>Status: 50% done, needs help</em></p>
<p>There are 27 HTML templates remaining to be redesigned (from 59). That's mostly
due to internal cleanup than targeted refactoring. More work on this item
will probably follow towards the end of the year after we get more priority items out of
the way and get more of the new team members rolling!</p>
<h2>Modernize reporting aka Telemetry</h2>
<p><em>Status: in progress, a bit behind schedule</em></p>
<p>The specs for the new <a href="/blog/kiwi-tcms-team/2019/03/03/legacy-reports-become-telemetry/">Telemetry</a> system
have been defined after taking into account feedback on GitHub issues. Anton Sankov is
the leading developer for this feature. So far we have 2 telemetry reports merged:
testing break-down and status matrix. The next one will be execution trends.</p>
<p>There are lots of minor issues or missing functionality in these first iterations
(compared to specification). Our plan is to have the major use-cases satisfied first
and then work to refine all of the existing telemetry pages.</p>
<h2>Plugins for 3rd party test automation frameworks</h2>
<p><em>Status: good, needs help</em></p>
<p>Until now we have released TAP, junit.xml and native JUnit 5 plugins. There's also
a PHPUnit plugin which is more or less complete but unreleased yet. Both JUnit 5
and PHPUnit plugins are developed by external contributors!</p>
<p>We often get asked for plugins for languages and frameworks we don't use or don't
even know! Given that our expertise is mostly in Python we will gladly accept your
pull requests if you decide to maintain or contribute to one of the plugins. This
will also help us get insight into what automation frameworks people are using
and how exactly you structure a test automation workflow around Kiwi TCMS.</p>
<p>Checkout the
<a href="https://kiwitcms.readthedocs.io/en/latest/plugins.html">documentation</a> for links
and more info.</p>
<h2>Redefine bug-tracker integration</h2>
<p><em>Status: no progress</em></p>
<p>Last week, right after OpenExpo, we did a check-up session and this was one of the
areas identified with zero amount of progress. I have a strong preference to work
on this feature myself but have not been able to due to various other items that
need my attention.</p>
<p>The short version is that I'd prefer to remove all issue tracker specific code
and allow the tester to add arbitrary URLs to link to existing bugs. How to do
integration (even as simple as publishing a comment in the bug tracker) over
a generic interface still eludes me. In the next few weeks I will kick-off this
topic with a separate blog post/issue for everyone to comment on.</p>
<h2>GitHub flow integration</h2>
<p><em>Status: no progress</em></p>
<p>Our team spent some time making Kiwi TCMS the first open source TCMS available
on the <a href="https://github.com/marketplace/kiwi-tcms">GitHub Marketplace</a>. We will
continue this integration effort and flow integration will emerge from that.
There's also many things that need to be done to satisfy GitHub's .</p>
<h2>Agile integration with Trello</h2>
<p><em>Status: no progress</em></p>
<h2>Improve engineering productivity</h2>
<p><em>Status: no progress</em></p>
<p>Our mission is to transform testing in your organization by providing
the tools for that via Kiwi TCMS. It is astonishing that so far nobody has provided
any kind of feedback in <a href="https://github.com/kiwitcms/Kiwi/issues/703">Issue #703</a>
wrt improving productivity in their teams!</p>
<p>We have some ideas which have been blocked by lack of resources on the team and
refactoring tasks. Because we've adopted this as our mission this is an important
item for us and we'll continue working on it as resources allow.
Progress is to be expected towards the end of the year.</p>
<h2>Community</h2>
<p><em>Status: great, on track, needs work</em></p>
<p>This is our strongest area during the year so far. We have a strong presence in
several communities, our event schedule is busy enough and we are gaining more
recognition every day!</p>
<ul>
<li>Hosted project stand at 3/5 conferences with 2 more on-track</li>
<li>Won the OpenAward for <a href="2019-06-24-openawards-winner.markdown">Best Tech Community</a></li>
<li>Hosted several presentations and workshops with few more on track</li>
<li>Found new talent to join the core team: 2 just ready to start contributing, 5 more in training</li>
<li>1 more senior engineer as a mentor. We also have a few independent wanna-be contributors
  and will be hosting qualification interviews for marketing assistant very soon</li>
<li>There are contributions and pull requests coming from users of Kiwi TCMS as well.
  We'd like to see more of course.</li>
<li>There are a couple of open source projects and companies using Kiwi TCMS who
  are friendly towards the project. We are working with them to get a public
  endorsement on the website and engage in more technical work together. Of course
  everyone has limited resources and is very busy :-(</li>
<li>Sponsors on <a href="https://opencollective.com/kiwitcms#contributors">OpenCollect</a> are just
  a few but we didn't have any previously so this is a good sign.</li>
</ul>
<p>This is the moment to mention that not all is honey and roses in open source land.
Kiwi TCMS suffers from the problem that many of our users can't be contributors
or simply don't want to!</p>
<p>Manual testers can't program. This is a fact and a good sized chunk of our user base
actually performs manual testing. Those that can write automation and probably
code decently well may not be familiar with Python and Django. At least in Bulgaria
these two aren't very popular, definitely not among testers. That is to say this part
of the user-base simply doesn't have the necessary skills to contribute and the majority
of what we need is code contribution!</p>
<p>Another (fairly big IMO) group of users are coming from proprietary companies who
view open source and Kiwi TCMS as a zero cost option. Something that they take free
of charge and use it without ever contributing back. They don't understand nor really
care about the open source culture.</p>
<p>To make things worse we receive requests every single day via
our private email addresses or questions via IM despite our website clearly stating
community engagement rules. On a few occasions we have received very rude comments
of the sort "our company demands you fix this", "is this going to be ready this year"
(context implying entitlement), etc. To make things more ridiculous we've even received
support requests (via contact form) from companies and start-up
who get their return address wrong so we can't get in touch directly!</p>
<p>In short: don't demand anything from us unless you are ready to pay for it, work for it
yourself or propose a mutually beneficial scenario. We do try to keep the community
happy but more importantly follow our mission and develop our core team!</p>
<p>Happy testing!</p>
        </div>
    </article>
    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2019/06/24/kiwi-tcms-is-openawards-2019-best-tech-community-winner/" rel="bookmark" title="Permalink to Kiwi TCMS is OpenAwards 2019 Best Tech Community Winner">
                <h1 class="top-header">Kiwi TCMS is OpenAwards 2019 Best Tech Community Winner</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Mon 24 June 2019
            </p>
        </div>

        <div class="content">
            <p><img src="/images/openexpo/award.jpg"
     alt="Image of the award"
     style="float: none"></p>
<p>Kiwi TCMS is the winner at OpenAwards'19 category Best Tech Community!
Big thanks to the jury, our contributors and core-team and the larger
open source and quality assurance communities who voted for us and supported
the project during all of those years.</p>
<p>This award is the best present we could get to mark the 10th anniversary
of the project. More news of how we are progressing with current roadmap will
follow soon in a separate blog post.</p>
<p>Thank you &amp; happy testing!</p>
        </div>
    </article>
    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2019/05/25/pylint-workshop-with-django-bulgaria-user-group/" rel="bookmark" title="Permalink to Pylint workshop with Django Bulgaria user group">
                <h1 class="top-header">Pylint workshop with Django Bulgaria user group</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Sat 25 May 2019
            </p>
        </div>

        <div class="content">
            <p>On Tuesday I hosted my pylint workshop during the regular
<a href="https://www.facebook.com/events/295673718035353/">Django Bulgaria meetup</a>.
This edition was the first which was practice based.</p>
<p>Attendance numbers were low but participation was very good. We managed to
create 4 new checkers for Kiwi TCMS:</p>
<ul>
<li><a href="https://github.com/kiwitcms/Kiwi/pull/949">PR #949 - AutoField checker</a></li>
<li><a href="https://github.com/kiwitcms/Kiwi/pull/950">PR #950 - OneToOneField checker</a></li>
<li><a href="https://github.com/kiwitcms/Kiwi/pull/951">PR #951 - discover directories without __init__.py</a></li>
<li><a href="https://github.com/kiwitcms/Kiwi/pull/952">PR #952 - empty class checker</a></li>
<li><a href="https://github.com/kiwitcms/Kiwi/pull/955">PR #955 - function based view checker</a></li>
</ul>
<p>Many thanks to all contributors. These new checkers have discovered quite a
few new issues with Kiwi TCMS so this is an area which our team is going to improve.</p>
<p>Those who missed the workshop will be able to catch up one of the next editions:</p>
<ul>
<li>26-29 August, GUADEC, Thessaloniki - TBC (presentation)</li>
<li>end of September, Python meetup, Zagreb - TBA</li>
<li>03-05 October, PyCon Balkan, Belgrade - TBC</li>
<li>11-13 October, HackConf, Sofia</li>
<li>15-17 October, TestCon Europe, Vilnius - TBC (backup presentation)</li>
<li>23-25 October, Testwarez, Ossa, Poland - TBC (presentation)</li>
<li>14-15 November, Software Engineering Conference Russia, Saint-Petersburg - TBC</li>
<li>20-22 November, ConTEST, New York - TBC (workshop and/or presentation)</li>
</ul>
<p>Happy testing!</p>
        </div>
    </article>
    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2019/02/22/how-to-use-kiwi-tcms-plugins-pt-1/" rel="bookmark" title="Permalink to How to use Kiwi TCMS plugins, Pt. 1">
                <h1 class="top-header">How to use Kiwi TCMS plugins, Pt. 1</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Fri 22 February 2019
            </p>
        </div>

        <div class="content">
            <p>In
<a href="/blog/kiwi-tcms-team/2019/02/01/kiwi-tcms-65/">release notes for v6.5</a>
we announced several plugins which will fetch test names and execution results
from your automated test suite.</p>
<p>Plugins can be controlled via environment variables which will affect how
test results are recorded in the Kiwi TCMS database! This blog post is an introduction
how that works and what you can do with it! For this purpose I will be using the
<a href="https://github.com/kiwitcms/plugin-demo">plugin-demo</a> repository, which simulates
real development work.</p>
<p><em>Full documentation and list of available plugins is available in chapter
<a href="https://kiwitcms.readthedocs.io/en/latest/plugins.html">Automation Frameworks Plugins</a>!</em></p>
<h2>Always create new TestRun by default</h2>
<p>The default behavior is always to create a new TestRun if controlling variables
are not overridden! Product name, version and build will receive default values
if tests are running in Travis CI or Jenkins. For example
<a href="https://travis-ci.org/kiwitcms/plugin-demo/builds/496217246">Travis Build #2</a> for
<a href="https://github.com/kiwitcms/plugin-demo/commit/d455fb42fb7c2aedadfd5f66de7d131109c03350">commit d455fb4</a>
creates <a href="https://tcms.kiwitcms.org/runs/12/">TR-12</a> and
<a href="https://tcms.kiwitcms.org/plan/10/">TP-10</a>!</p>
<div class="highlight"><pre><span></span><code><span class="err">Product=kiwitcms/plugin-demo</span>
<span class="err">Version=d455fb42fb7c2aedadfd5f66de7d131109c03350</span>
<span class="err">Build=2</span>
</code></pre></div>


<p>Next we convert the README file from Markdown to reStructuredText which triggers
<a href="https://travis-ci.org/kiwitcms/plugin-demo/builds/496220575">Travis Build #3</a> for
<a href="https://github.com/kiwitcms/plugin-demo/commit/418b80b3bbb65a799f695dc59d488c76f560fa2b">commit 418b80b</a>.
This build <strong>again</strong> creates a new TestRun and new TestPlan for it. Respectively
<a href="https://tcms.kiwitcms.org/runs/14/">TR-14</a> and
<a href="https://tcms.kiwitcms.org/plan/12/">TP-12</a>!</p>
<div class="highlight"><pre><span></span><code><span class="err">Product=kiwitcms/plugin-demo</span>
<span class="err">Version=418b80b3bbb65a799f695dc59d488c76f560fa2b</span>
<span class="err">Build=3</span>
</code></pre></div>


<p><strong>Important:</strong> we can see that version is different which will affect how artifacts
are organized in Kiwi TCMS, possibly affect how you will report status to stakeholders!</p>
<h2>Override ENV variables for more control</h2>
<p>Let's say the QA team has decided that all test results must be reported under the
same TestPlan. This means version must be the same between various builds in Travis CI!
To control this we export <code>TCMS_PRODUCT_VERSION=master</code> in CI <strong>before</strong> executing
the TAP plugin! Checkout the commit on GitHub to see how it is done!</p>
<p>This triggers
<a href="https://travis-ci.org/kiwitcms/plugin-demo/builds/496223505">Travis Build #4</a> for
<a href="https://github.com/kiwitcms/plugin-demo/commit/e484e59023caf665e8f93341395af6f397691b93">commit e484e59</a>.
Because this is the first time where Version == master the plugin creates
<a href="https://tcms.kiwitcms.org/plan/14/">TP-14</a> and reports the results under
<a href="https://tcms.kiwitcms.org/runs/16/">TR-16</a>.</p>
<div class="highlight"><pre><span></span><code><span class="err">Product=kiwitcms/plugin-demo</span>
<span class="err">Version=master</span>
<span class="err">Build=4</span>
</code></pre></div>


<p>Right after that I realized we can make this configuration a bit more generic
because our team is planning to support multiple versions of the product and
development will be done in separate branches!
<a href="https://travis-ci.org/kiwitcms/plugin-demo/builds/496228021">Travis Build #5</a> for
<a href="https://github.com/kiwitcms/plugin-demo/commit/f1f2878d80a7327b54c8e33d1c6d6f14153d6d12">commit f1f2878</a>
still ends up with Version == master because we are still working on the <code>master</code>
branch! That is to say, the product is in active mode of development.</p>
<p>Results are reported in
<a href="https://tcms.kiwitcms.org/runs/18/">TR-18</a> which is again part of
<a href="https://tcms.kiwitcms.org/plan/14/">TP-14</a>.</p>
<div class="highlight"><pre><span></span><code><span class="err">Product=kiwitcms/plugin-demo</span>
<span class="err">Version=master</span>
<span class="err">Build=5</span>
</code></pre></div>


<p><a href="https://travis-ci.org/kiwitcms/plugin-demo/builds/496229819">Travis Build #6</a> for
<a href="https://github.com/kiwitcms/plugin-demo/commit/df6153b2495bfc6825f25e544ae1806108aa490f">commit df6153b</a>
adds the new functionality <em>README badges</em> and reports test results in
<a href="https://tcms.kiwitcms.org/runs/20/">TR-20</a> which is again part of
<a href="https://tcms.kiwitcms.org/plan/14/">TP-14</a>.</p>
<h2>More ENV overrides</h2>
<p>While giving status reports back to stakeholders and developers the information that
we have in the TestRun is Build number! This follows the numbering scheme in Travis CI
(or Jenkins job number) and isn't very useful.</p>
<p>Let's define <code>TCMS_BUILD</code> to be the first 7 characters of the commit hash! When QA
tells devel that something isn't working and redirects them to the TestRun they can
immediately use the Build information and git checkout the offending variant of the product
for investigation.</p>
<p>This results in
<a href="https://travis-ci.org/kiwitcms/plugin-demo/builds/496233565">Travis Build #7</a> for
<a href="https://github.com/kiwitcms/plugin-demo/commit/bf75d0abe9695e3ee3b49b8944bab9db43bb25e6">commit bf75d0a</a>,
<a href="https://tcms.kiwitcms.org/runs/22/">TR-22</a>,
<a href="https://tcms.kiwitcms.org/plan/14/">TP-14</a>.</p>
<div class="highlight"><pre><span></span><code><span class="err">Product=kiwitcms/plugin-demo</span>
<span class="err">Version=master</span>
<span class="err">Build=bf75d0a</span>
</code></pre></div>


<h2>Report results in pre-existing TestRun</h2>
<p>There are many reasons you may want to do this:</p>
<ul>
<li>include both manual and automation tests for the same build;</li>
<li>mix results from multiple test suites for the same build,
  e.g. unit, functional, performance</li>
<li>mix results from multiple but similar platforms in the same build,
  e.g. cross-platform application for iOS and Android</li>
</ul>
<p>To do so I've created <a href="https://tcms.kiwitcms.org/runs/24/">TR-24</a> beforehand and
configured <code>TCMS_RUN_ID=24</code> in my CI environment. TR-24 also contains
<a href="https://tcms.kiwitcms.org/case/57/">TC-57: Verify we can report results from several plugins into the same TR</a>.
this was created and added via the web interface.</p>
<p><strong>Note:</strong> mixing additional test cases can be done either before or after
automation results are reported with the plugin!</p>
<p><strong>Important:</strong> when reporting results to an existing TestRun Kiwi TCMS plugins
don't care in which TestPlan this TR is! In theory it is possible to report
the results for <code>Product=kiwitcms/plugin-demo</code> into any TP/TR pair! However we
don't want to do this crazy thing and instead I've created TR-24 inside the already
existing TP-14!</p>
<p><strong>Note:</strong> because I don't know what is the git commit beforehand I've configured
TR-24 with <code>Build=unspecified</code>. If I wanted I could update this with the correct value
once I know the commit hash for the related changes I am testing.</p>
<p><strong>Important:</strong> the plugin-demo repository uses both kiwitcms-tap-plugin and
kiwitcms-junit.xml-plugin at the same time! They differ in the way test names
are compiled! Both are reported in TR-24. See TC-57 text for information how to
distinguish between the two.</p>
<p>See
<a href="https://travis-ci.org/kiwitcms/plugin-demo/builds/496237911">Travis Build #8</a> for
<a href="https://travis-ci.org/kiwitcms/plugin-demo/builds/496237911">commit 85ad939</a>,
<a href="https://tcms.kiwitcms.org/runs/24/">TR-24</a>,
<a href="https://tcms.kiwitcms.org/plan/14/">TP-14</a>.</p>
<div class="highlight"><pre><span></span><code><span class="err">Product=kiwitcms/plugin-demo</span>
<span class="err">Version=master</span>
<span class="err">Build=unspecified</span>
</code></pre></div>


<p>Also check-out comments in TR executions to see when and who had executed the test case.</p>
<p>So far there have been some tests which were failing (although Travis reports PASS) so
I decided to fix them.
<a href="https://travis-ci.org/kiwitcms/plugin-demo/builds/496240713">Travis Build #9</a> for
<a href="https://github.com/kiwitcms/plugin-demo/commit/a25b3841e656d47a7539c608e375cecbf3bed2ac">commit a25b384</a>
is still configured with <code>TCMS_RUN_ID=24</code>. This means results will be reported in
TR-24, effectively overwriting previous results.</p>
<p>Check-out <em>Change Log</em> under each individual execution and you will see several
time stamps when status was updated! In other words, as long as <code>TCMS_RUN_ID</code> is
pointing to an existing TestRun this TR will keep the results of the last test suite execution!</p>
<h2>Continue development, restore ENV configuration</h2>
<p><a href="https://travis-ci.org/kiwitcms/plugin-demo/builds/496243124">Travis Build #10</a> for
<a href="https://github.com/kiwitcms/plugin-demo/commit/c4f1ae5ecadb249d39923cedbbf53a85e50420b3">commit c4f1ae5</a>
removes <code>TCMS_RUN_ID</code>! Results are reported in
<a href="https://tcms.kiwitcms.org/runs/25/">TR-25</a>,
<a href="https://tcms.kiwitcms.org/plan/14/">TP-14</a>.</p>
<div class="highlight"><pre><span></span><code><span class="err">Product=kiwitcms/plugin-demo</span>
<span class="err">Version=master</span>
<span class="err">Build=c4f1ae5</span>
</code></pre></div>


<h2>Branch out for an LTS version</h2>
<p>Our team has decided to make the first LTS release of the product. We branch out into
<code>lts-v0</code> branch in git and cut the first NVR. This results in
<a href="https://travis-ci.org/kiwitcms/plugin-demo/builds/496245067">Travis Build #11</a> for
<a href="https://github.com/kiwitcms/plugin-demo/commit/9f1ef717e3fb248d65535ed66b5c4e61e6f85a6e">commit 9f1ef71</a>
<a href="https://tcms.kiwitcms.org/runs/27/">TR-27</a>,
<a href="https://tcms.kiwitcms.org/plan/16/">TP-16</a>.</p>
<div class="highlight"><pre><span></span><code><span class="err">Product=kiwitcms/plugin-demo</span>
<span class="err">Version=lts-v0</span>
<span class="err">Build=9f1ef71</span>
</code></pre></div>


<p>Because this is the first time we are running tests for this product version
we end up with the newly created TP-16!</p>
<p><strong>Note:</strong> see how version was populated with the correct value for the git branch!
This is because my CI config uses <code>TCMS_PRODUCT_VERSION=$TRAVIS_BRANCH</code> and no further
changes were required! I made this change back in Travis Build #5 anticipating what
will come in the future!</p>
<p>The product is now live and customers have reported critical bugs for it:
<em>URLs for the badges in README are wrong</em>! I fix those and add more tests of course, see:
<a href="https://travis-ci.org/kiwitcms/plugin-demo/builds/496247347">Travis Build #12</a> for
<a href="https://github.com/kiwitcms/plugin-demo/commit/2d72754d3f911ef4e25287f203471f4466b95d12">commit 2d72754</a>,
<a href="https://tcms.kiwitcms.org/runs/29/">TR-29</a> for
<a href="https://tcms.kiwitcms.org/plan/16/">TP-16</a>.</p>
<div class="highlight"><pre><span></span><code><span class="err">Product=kiwitcms/plugin-demo</span>
<span class="err">Version=lts-v0</span>
<span class="err">Build=2d72754</span>
</code></pre></div>


<p>TR-29 contains the new <a href="https://tcms.kiwitcms.org/case/58/">TC-58</a>!</p>
<h2>cherry-pick between branches</h2>
<p>In the <code>lts-v0</code> branch customers have identified a serious issue. It doesn't exist on <code>master</code>
but the test is still valid so I cherry-pick it! In git you can backport or forwardport very
easily. Regardless of the direction Kiwi TCMS plugins will record the test results for you.</p>
<p>See
<a href="https://travis-ci.org/kiwitcms/plugin-demo/builds/496252529">Travis Build #13</a> for
<a href="https://github.com/kiwitcms/plugin-demo/commit/31ae5b3358137fde7d2b5c3656b384acc7331d95">commit 31ae5b3</a>,
<a href="https://tcms.kiwitcms.org/runs/31/">TR-31</a> for
<a href="https://tcms.kiwitcms.org/plan/14/">TP-14</a>.</p>
<p>We can see that TC-58, which was originally implemented on the <code>lts-v0</code> branch
is now present!</p>
<h2>Summary</h2>
<p>This is a very basic example of how you can organize collection and reporting for
your automation test suite results with Kiwi TCMS. The links here only refer to
artifacts created by <code>kiwitcms-tap-plugin</code> while in the DB we keep others as well.</p>
<p>There are feature requests for more ENV variables which will allow you to control
TestPlan creation and child/parent relationship between test plans. See
<a href="https://github.com/kiwitcms/tap-plugin/issues">https://github.com/kiwitcms/tap-plugin/issues</a> and vote with a <code>:+1:</code> reaction
to help us plan for these features.</p>
<p>Kiwi TCMS automation framework plugins are nothing more than result parsers
which talk back to a database. It is up to you to decide how to organize the
collection of test results and how to report on them later, when the need arises.</p>
<p>Future installments in this post series will take a look at workflows with
feature branches and pull requests and discuss possible organization scenarios.
You are welcome to share your ideas in the comments below.</p>
<p>Happy testing!</p>
        </div>
    </article>
    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2019/01/10/project-mission-and-goals-for-2019/" rel="bookmark" title="Permalink to Project mission and goals for 2019">
                <h1 class="top-header">Project mission and goals for 2019</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Thu 10 January 2019
            </p>
        </div>

        <div class="content">
            <p>Hello testers, Kiwi TCMS has taken on a brave new
mission! We would like to transform the testing process by making it more
organized, transparent &amp; accountable for everyone on your team. Our goal
is to improve engineering productivity and participation in
testing. The following blog post outlines how we would like to achieve
this and what goals we put before ourselves for this year.</p>
<h2>Complete the internal refactoring</h2>
<p>Last year we took on the challenge to bring a legacy code base up to modern
coding standard. We did not complete that effort but made very good progress
along the way. This is not a small task and that's why our team will continue
with it this year.</p>
<p><img src="/images/codeclimate_jan_2019.png" style="float:none"
     alt="CodeClimate report" title="CodeClimate report"></p>
<ul>
<li><a href="https://codeclimate.com/github/kiwitcms/Kiwi">CodeClimate</a>:
  0 issues, 0% technical debt, health score A</li>
<li><a href="https://scrutinizer-ci.com/g/kiwitcms/Kiwi/">Scrutinizer</a>:
  only A and B type issues</li>
<li><a href="https://travis-ci.org/kiwitcms/Kiwi/jobs/475946313">Pylint</a>: 0 issues</li>
<li>Remove vendored-in Handlebars, jQuery, jQuery-UI and TableDnD JavaScript
  libraries in favor of existing npm dependencies</li>
<li>Front-end uses the existing JSON-RPC instead of backend views that
  are only used for AJAX requests. Tip: these are usually accessed via
  <code>postToURL()</code> and <code>jQ.ajax()</code> on the front-end</li>
<li>Inspect and classify all 3rd party issues reported from
  <a href="https://scan.coverity.com/projects/kiwitcms-kiwi">Coverity</a> and
  <a href="https://travis-ci.org/kiwitcms/Kiwi/jobs/475946312">Bandit</a>. Report and fix
  what we can, ignore the rest that do not affect Kiwi TCMS.</li>
</ul>
<h2>Redesign the UI templates with the help of Patternfly</h2>
<p>There are 59 templates remaining to be converted to a modern look and feel.
Along with them comes more refactoring and even redesign of the existing pages
and the workflow around them. Together with refactoring this will make Kiwi TCMS
easier to use and also to maintain.</p>
<h2>Modernize reporting</h2>
<p>We are planning to remove the existing reports feature because they are not well
designed. We will re-implement existing functionality that our community finds useful,
add new types of reports (incl. nicer graphics and UI) and make it possible for the
reporting sub-system to be more easily extendable.</p>
<p>Phase out is planned to begin after 1st March 2019! Until then we are looking for your
feedback. Please comment in
<a href="https://github.com/kiwitcms/Kiwi/issues/657">Issue #657</a>!</p>
<h2>Plugins for 3rd party test automation frameworks</h2>
<p>These will make it easier to collect results from automated test suites into
Kiwi TCMS for later analysis. Instead of creating scripts that parse the
results and talk to our API you will only have to install an additional package
in your test environment and configure the test runner to use it! Automation
test results will then appear inside Kiwi TCMS.</p>
<ul>
<li><a href="https://github.com/kiwitcms/junit-plugin">JUnit 5 plugin</a> - already in progress</li>
<li><a href="https://github.com/kiwitcms/Kiwi/issues/692">TestNG plugin</a> - RFC</li>
<li><a href="https://github.com/kiwitcms/Kiwi/issues/693">Django plugin</a> - RFC</li>
<li><a href="https://github.com/kiwitcms/Kiwi/issues/694">py.test plugin</a> - RFC</li>
</ul>
<p>If you would like to use such functionality leave your vote inside GitHub
issues! In case you would like to write a test-runner plugin you can find the
specification
<a href="http://kiwitcms.org/blog/atodorov/2018/11/05/test-runner-plugin-specification/">here</a>.</p>
<h2>Redefine bug-tracker integration</h2>
<blockquote>
<p>Question: Does Kiwi TCMS integrate with JIRA?</p>
<p>Answer: Well, it does. How exactly do you want to integrate?</p>
<p>... silence ...</p>
</blockquote>
<p>The following dialog happens every time someone asks me about bug-tracker
integration, especially with JIRA. The thing is integration is a specified
set of behavior which may or may not be desired in a particular team. As of now
Kiwi TCMS is able to open a URL to your bug-tracker with predefined field
values, add comments to bug reports and report a simple summary of bugs
inside a TestRun.</p>
<p>We recognize this may not be enough and together with the community we
really need to define what bug tracker integration means! The broader domain
of application lifecycle management tools (of which TCMS is a sub-set) have an
integrated bug tracking system. We can add something like this and save you
the trouble of using JIRA, however many teams have already invested in
integrating their infrastructure or just like other tools. For example we love
GitHub issues and our team regularly makes public reports about issues that
we find internally!</p>
<ul>
<li>Goal: Redefine what bug-tracker integration means, vote in
  <a href="https://github.com/kiwitcms/Kiwi/issues/698">Issue #698</a></li>
<li>Goal: Bug-tracker functionality inside Kiwi TCMS, similar to
  GitHub Issues. Vote in
  <a href="https://github.com/kiwitcms/Kiwi/issues/699">Issue #699</a></li>
<li>Goal: Integration with Redmine (per current specification), vote in
  <a href="https://github.com/kiwitcms/Kiwi/issues/41">Issue #41</a></li>
<li>Goal: fix existing bugs around bug-tracker integration
  (per current specification). Vote in
  <a href="https://github.com/kiwitcms/Kiwi/issues/97">Issue #97</a>,
  <a href="https://github.com/kiwitcms/Kiwi/issues/117">Issue #117</a>,
  <a href="https://github.com/kiwitcms/Kiwi/issues/289">Issue #289</a>,
  <a href="https://github.com/kiwitcms/Kiwi/issues/290">Issue #290</a>,
  <a href="https://github.com/kiwitcms/Kiwi/issues/320">Issue #320</a>,
  <a href="https://github.com/kiwitcms/Kiwi/issues/479">Issue #479</a> and
  <a href="https://github.com/kiwitcms/Kiwi/issues/530">Issue #530</a></li>
</ul>
<h2>GitHub flow integration</h2>
<p>Developers have their
<a href="https://guides.github.com/introduction/flow/">GitHub PR flow</a> and if they
have done the job of having unit tests then they will merge only when things
are green! This leaves additional testing efforts kind of to the side and
doesn't really help with transparency and visibility. I'm not going to mention
having an automatically deployed staging environment for every change
because very few teams actually have managed to do this effectively.</p>
<p><img src="/images/github_kiwitcms_pr_status.png" style="float:none"
     alt="Kiwi TCMS statuses on GitHub PR" title="Kiwi TCMS statuses on GitHub PR"></p>
<ul>
<li>Goal: Figure out how Kiwi TCMS can integrate with GitHub flow and bridge the gap.
  Please share and <code>+1</code> your wildest ideas in
  <a href="https://github.com/kiwitcms/Kiwi/issues/700">Issue #700</a>.</li>
<li>Follow up: depending on the results in #700 we will follow with other goals and
  sub-tasks</li>
</ul>
<h2>Agile integration with Trello</h2>
<p>Speaking of modern engineering flow is your team truly agile? When and how
do you plan your testing activities ? Before the devel sprint or afterwards?
How many testers take part in refining product backlog and working on user stories?</p>
<p>Similar to GitHub flow lots of teams and open source projects are using Trello
to effectively organize their development process. Testing should not be left
behind and Kiwi TCMS may be able to help.</p>
<ul>
<li>Goal: Figure out how Kiwi TCMS fits into the overall <code>devel-test-planning</code>
  process for agile teams and what we can do to make this easier for testers.
  Please share and <code>+1</code> your wildest ideas in
  <a href="https://github.com/kiwitcms/Kiwi/issues/701">Issue #701</a></li>
<li>Follow up: depending on the results in #701 we will follow with other goals and
  sub-tasks</li>
</ul>
<h2>Improve engineering productivity</h2>
<p>What makes a test engineer productive when they need to assess product risk and
new features, when mapping product requirements documents (PRD) to test plans and
test cases, when collaborating on user stories and behavior specification ?
What makes developers, product owners, designers and other professionals productive
when it comes to dealing with testing ?</p>
<p>For example consider the following workflow:</p>
<ul>
<li>Company has idea for a new product</li>
<li>In case this is a big product it may have its own mission, i.e. what kind
  of problem is it trying to solve and for which group of customers</li>
<li>Product backlog is then created which outlines features that map
  to the product mission</li>
<li>Then the team, together with test engineers perform example mapping
  and discuss and refine the initial feature requirements. User stories
  are created</li>
<li>Behavior specification may also be created</li>
<li>Test plans and test cases are the immediate product of BDD specs and
  desired user stories</li>
</ul>
<p>Later we iterate through the sprints and for each sprint something like
this happens:</p>
<ul>
<li>Desired product features are planned for development. They must be <em>complete</em>
  at least in terms of requirements, specs and tests</li>
<li>Devel writes code, maybe some unit tests, testers can also write automated tests
  and/or manually verify the current state of the feature being developed</li>
<li>Testing, including exploratory is performed before feature is merged</li>
<li>Rinse and repeat</li>
</ul>
<p>Devel is also part of testing, right? Product owners, UX and interaction
designers as well. Producing quality software product is a team effort!</p>
<p>In every step of the way Kiwi TCMS can provide notification wizards, guidelines
and/or documentation for best practices, facilitate tooling, e.g. to write user stories
and assess them or map out an exploratory testing session, etc. The list
of ideas is virtually endless. We can even go into deep learning, AI and
blockchain but honestly who knows how to use them in testing ?</p>
<p>Our team is not quite sure how this goal will look like 3 months from now
but we are certain that testing needs to happen first, last and all the time
during the entire software development lifecycle. By providing the necessary
functionality and tools in Kiwi TCMS we can boost engineering productivity
and steer the testing process in your organization into a better, more productive
direction which welcomes participation from all engineering groups.</p>
<p>Let's consider another point of view: testing is a creative activity
which is benefited by putting your brain into a specific state of mind!
For example Gherkin (the Given-When-Then language) has the benefit of
forcing you to think about behavior and while doing so you are vocalizing
the various roles in the system, what kind of actions are accepted and
what sort of result is expected! Many times this will help you remember or
discover missing scenarios, edge cases and raise even more questions!</p>
<p>Crazy ideas, brain dumps and <code>+1</code> as always are welcome in
<a href="https://github.com/kiwitcms/Kiwi/issues/703">Issue #703</a>.</p>
<h2>Community</h2>
<p>Coding alone is not fun! Here's what you can do to help us:</p>
<ul>
<li><a href="https://github.com/kiwitcms/Kiwi/stargazers">Become a stargazer</a> by clicking the
  <code>Star</code> button on our GitHub repository</li>
<li><a href="https://twitter.com/KiwiTCMS">Follow @KiwiTCMS on Twitter</a></li>
<li><a href="https://kiwitcms.us17.list-manage.com/subscribe/post?u=9b57a21155a3b7c655ae8f922&amp;id=c970a37581">Subscribe to our newsletter</a> -
  we are GDPR compliant and we don't spam, we promise!</li>
<li>Vote with a <code>+1</code> reaction on GitHub issues (top-right corner)</li>
<li>Send us testimonials and feedback about using Kiwi TCMS.
  We will be happy to publish them on our website</li>
<li>Send us a pull request on GitHub</li>
<li><a href="https://opencollective.com/kiwitcms">Become a sponsor</a>!</li>
</ul>
<p>We are also looking to expand our core team and the list of occasional
contributors. The following are mostly organizational goals:</p>
<ul>
<li>Goal: participate in 5 conferences with a project stand</li>
<li>Goal: define how we find, recruit and onboard new team members. The
  foundation is already set in
  <a href="https://tcms.kiwitcms.org/plan/3/kiwi-tcms-team-onboarding#testcases">TP-3</a></li>
<li>Goal: clearly mark GitHub issues which are suitable for external contributors
  which don’t want to spend lots of time learning how Kiwi TCMS works under the hood.
  We're going to tag all such issues with the
  <a href="https://github.com/kiwitcms/Kiwi/labels/help%20wanted">
    <img src="/images/github_helpwanted.png" style="float: none; margin:0"
         alt="GitHub help wanted" title="GitHub help wanted">
  </a> label</li>
</ul>
<h2>Development policy</h2>
<p>Our team will be working on areas related to the goals above. A <code>+1</code>
reaction on GitHub issues will help us prioritize what we work on!</p>
<p><img src="/images/github_plus_one.png" style="float:none"
     alt="GitHub +1" title="GitHub +1"></p>
<p>Bug fixes and other
issues will be occasionally slipped into the stream and pull requests from
non-team contributors will be reviewed and merged in a timely fashion.</p>
<p>There is at least 1 full day of work that goes behind the scenes when
a new version is officially released: compile changelog, build images and
upload them, create blog post and newsletter announcement, share on social
media, etc. We also deploy on our own Kiwi TCMS instance as a stop-gap
measure before making everything public!</p>
<p>New PyPI tarballs and Docker images will be released every few weeks as
we see fit, this has been our standard process. We try to align releases
with Django's release schedule and try to cut a new version when there are known
security vulnerabilities fixed. However we can't guarantee this will always
be the case!</p>
<p>If you are in a hurry and need something quickly the best option is to
send a pull request, build your own Docker image from source and
maybe consider
<a href="https://opencollective.com/kiwitcms">sponsoring us via Open Collective</a>!</p>
<p>Happy testing!</p>
        </div>
    </article>
    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2018/12/17/roadmap-status-report-for-2018/" rel="bookmark" title="Permalink to Roadmap status report for 2018">
                <h1 class="top-header">Roadmap status report for 2018</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Mon 17 December 2018
            </p>
        </div>

        <div class="content">
            <p>Hello everyone, in this article I will outline the progress that the Kiwi TCMS
team has made towards achieving the goals in our 2018
<a href="/blog/kiwi-tcms-team/2018/01/22/kiwi-tcms-roadmap-for-2018/">roadmap</a>
(<a href="/blog/atodorov/2018/07/25/mid-year-roadmap-status-report/">mid-year update here</a>).
TLDR; goals are completed at 62%. Refactoring legacy code is showing good results,
less so on the front-end side and there are items still in progress!</p>
<h2>Make code easier to maintain</h2>
<p><em>Status: good progress</em></p>
<p>Initially <a href="https://codeclimate.com/github/kiwitcms/Kiwi">CodeClimate</a> reported
a "D" rating with 600+ code smells and 600+ duplications and a 1 year estimation
to resolve these. We're now down to "C" rating with 171 smells and 203 duplications.</p>
<p>The level of technical debt has dropped from 32.5% down to 17.7% and we have removed
around 14000 lines of Python code and 8000 lines of JavaScript code without
losing significant functionality.</p>
<p>Checkout
<a href="https://codeclimate.com/github/kiwitcms/Kiwi/trends/technical_debt">the stats</a>
for more info!</p>
<h2>Use pylint and pylint-django</h2>
<p><em>Status: almost finished</em></p>
<p>Both pylint and pylint-django have been integrated into our CI workflow. There are even
some custom built plugins that we use. The number of issues reported is down to 100
from 4000+ initially. These are predominantly <code>fixme</code> comments which are also in parts
of the code that are scheduled for removal and refactoring.</p>
<h2>Render HTML, return JSON</h2>
<p><em>Status: moderate progress</em></p>
<p>Several views were modified to return pure JSON but we've not
done any targeted work to resolve this issue. A number of other views have been
removed in favor of using the existing JSON-RPC layer.</p>
<p>This is an internal refactoring effort which isn't very visible from the outside.
This is also one of the factors contributing to the high number of removed
source code.</p>
<h2>Submit forms, post JSON, GET clean URLs</h2>
<p><em>Status: no progress</em></p>
<p>Not much has been done in this area except the occasional refactoring to
JSON-RPC.</p>
<h2>API layer</h2>
<p><em>Status: complete</em></p>
<h2>Documentation</h2>
<p><em>Status: moderate progress, dropped</em></p>
<p>All RPC methods have been documented! The rest of the internals will be documented
as we go along.</p>
<h2>No vendored JavaScript libraries</h2>
<p><em>Status: good progress</em></p>
<p>We still carry around jQuery, jQuery-UI and Handlebars.js. They will be
removed once the pages using them are converted to use the Patternfly widgets
library.</p>
<h2>Less HTML templates with better organization</h2>
<p><em>Status: moderate progress</em></p>
<p>There are still over 50 HTML templates in <code>tcms/templates/</code> that need to be
refactored into Patternfly. We've been working on them one at a time and will
focus more on this effort in the next couple of months.</p>
<h2>Modern interface with Patternfly</h2>
<p><em>Status: moderate progress</em></p>
<p>Some of the pages have been converted to use Patternfly. The most important pages
that still have a different look and feel are TestPlan view, TestCase view and
TestRun view. These are also the hardest to convert because they have lots of
tabs/components which pull information from various places. Our goal is to create
reusable widgets for the various components (e.g. a list of TestCases) and then
include these components into several different templates to minimize code
duplication.</p>
<h2>JavaScript updates and front-end testing</h2>
<p><em>Status: moderate progress</em></p>
<p>A number of JavaScript functions have been refactored and removed during the
past few releases but there are still thousands of lines of code left to deal with.
This effort is mostly happening in parallel with the Patternfly redesign.
We still don't have anything to test front-end JavaScript functionality!</p>
<h2>Community efforts</h2>
<p><em>Status: good progress</em></p>
<p>We are seeing a steady stream of new users registered on
<a href="https://public.tenant.kiwitcms.org/login/github-app/">https://public.tenant.kiwitcms.org</a> and
there are several active contributors on GitHub. Most of our translators are
very active and keep their respective languages fresh and up to date!</p>
<p>Kiwi TCMS was represented at OSCAL Tirana, DjangoCon Heidelberg, PyCon Prague,
HackConf Sofia, PiterPy St. Petersburg and OpenFest Sofia. We've also been
approved for a project stand at FOSDEM 2019 so watch this blog for more news.</p>
<p>Happy testing!</p>
        </div>
    </article>
    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2018/11/05/test-runner-plugin-specification/" rel="bookmark" title="Permalink to Test runner plugin specification">
                <h1 class="top-header">Test runner plugin specification</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Mon 05 November 2018
            </p>
        </div>

        <div class="content">
            <p>Happy Monday testers! Kiwi TCMS needs your help! We are looking for developers who
wish to create plugins for popular test runners that will record test results
in Kiwi TCMS! Initially we are looking for plugins for Python's unittest,
<a href="https://docs.djangoproject.com/en/2.1/topics/testing/advanced/#using-different-testing-frameworks">Django</a>
and <a href="https://junit.org/junit4/plugins.html">JUnit</a>!</p>
<h2>What is a test runner?</h2>
<p>When working with automated testing you have several components:</p>
<ul>
<li>A test module (or test script), e.g. <code>test_models.py</code> which contains
  tests for your software;</li>
<li>A test framework, e.g. Python nose, which provides the structure
  for test classes and methods and assert methods to use;</li>
<li>A test runner, which knows how to discover your test scripts, load them,
  execute the testing scenarios inside of them and report the results.</li>
</ul>
<p>Very often all of the components above live together inside the testing framework
but don't need to. For example the standard <code>unittest</code> module in Python
provides a test runner but there are also <code>nose</code> and <code>py.test</code> and Django provides
its own test runner that knows how to work with the database.</p>
<h2>Workflow organization</h2>
<p>Once you agree to writing a plugin we are going to create a separate GitHub
repository where you will be granted write privileges making you an independent
contributor to the Kiwi TCMS project!</p>
<p>Design and architecture of the plugin is up to you, following the practices
established by the testing framework in question. You will also have to create
a test suite for your plugin based on the specification below.</p>
<p>You are expected to use
<a href="https://public.tenant.kiwitcms.org/login/github-app/">public.tenant.kiwitcms.org</a> while working on the
plugin and afterwards. This is known as eating your own dog food!</p>
<p>For Python we provide the <code>tcms-api</code> module which already takes care of the
communications layer. For other languages you will have to create this layer or
depend on other open source libraries that provide a XML-RPC or JSON-RPC
client!</p>
<p>You can use
<a href="https://gist.github.com/atodorov/f5aed028b6f254d97bcaf93453abe8d2">this gist</a>
for inspiration!</p>
<h2>Behavior Specification</h2>
<p><em>Please use the comments section to discuss unclear behavior and missing scenarios!</em></p>
<div class="highlight"><pre><span></span><code>    <span class="n">SUMMARY</span><span class="p">:</span> <span class="n">Will</span> <span class="n">use</span> <span class="n">configuration</span> <span class="n">file</span> <span class="k">if</span> <span class="n">it</span> <span class="n">exists</span>
    <span class="n">GIVEN</span><span class="p">:</span> <span class="n">the</span> <span class="n">file</span> <span class="o">~/</span><span class="p">.</span><span class="n">tcms</span><span class="p">.</span><span class="n">conf</span> <span class="n">exists</span>
    <span class="n">WHEN</span><span class="p">:</span> <span class="n">plugin</span> <span class="n">initializes</span>
    <span class="n">THEN</span><span class="p">:</span> <span class="n">the</span> <span class="n">plugin</span> <span class="n">will</span> <span class="nb">log</span> <span class="n">an</span> <span class="n">info</span> <span class="n">message</span><span class="p">,</span> <span class="n">read</span> <span class="n">the</span> <span class="n">file</span> <span class="n">and</span>
    <span class="n">THEN</span><span class="p">:</span> <span class="n">configure</span> <span class="n">TCMS_API_URL</span><span class="p">,</span> <span class="n">TCMS_USERNAME</span><span class="p">,</span> <span class="n">TCMS_PASSWORD</span>
          <span class="n">variables</span> <span class="s">with</span> <span class="s">the</span> <span class="s">respective</span> <span class="s">values</span>


    <span class="n">SUMMARY</span><span class="p">:</span> <span class="n">Will</span> <span class="n">use</span> <span class="n">ENVIRONMENT</span> <span class="k">if</span> <span class="n">configuration</span> <span class="n">file</span> <span class="n">doesn</span><span class="o">&#39;</span><span class="n">t</span> <span class="n">exist</span>
    <span class="n">GIVEN</span><span class="p">:</span> <span class="n">the</span> <span class="n">file</span> <span class="o">~/</span><span class="p">.</span><span class="n">tcms</span><span class="p">.</span><span class="n">conf</span> <span class="n">does</span> <span class="n">not</span> <span class="n">exists</span>
    <span class="n">WHEN</span><span class="p">:</span> <span class="n">plugin</span> <span class="n">initializes</span>
    <span class="n">THEN</span><span class="p">:</span> <span class="n">the</span> <span class="n">plugin</span> <span class="n">will</span> <span class="n">read</span> <span class="n">configuration</span> <span class="n">from</span> <span class="n">environment</span> <span class="n">and</span> <span class="n">configure</span>
          <span class="n">the</span> <span class="s">following</span> <span class="s">variables/class</span> <span class="s">members:</span>
          <span class="n">TCMS_API_URL</span><span class="p">,</span> <span class="n">TCMS_USERNAME</span> <span class="n">and</span> <span class="n">TCMS_PASSWORD</span>


    <span class="n">SUMMARY</span><span class="p">:</span> <span class="n">Will</span> <span class="n">exit</span> <span class="k">if</span> <span class="n">TCMS_API_URL</span> <span class="n">not</span> <span class="n">configured</span>
    <span class="n">GIVEN</span><span class="p">:</span> <span class="n">TCMS_API_URL</span> <span class="n">variable</span> <span class="n">is</span> <span class="n">empty</span>
    <span class="n">WHEN</span><span class="p">:</span> <span class="n">plugin</span> <span class="n">initializes</span>
    <span class="n">THEN</span><span class="p">:</span> <span class="nb">log</span> <span class="n">a</span> <span class="n">warning</span> <span class="n">message</span> <span class="n">and</span> <span class="n">exit</span>
    <span class="n">AND</span><span class="p">:</span> <span class="n">depending</span> <span class="n">on</span> <span class="n">the</span> <span class="n">test</span> <span class="n">runner</span> <span class="n">framework</span> <span class="n">set</span> <span class="n">exist</span> <span class="n">status</span> <span class="mi">1</span>


    <span class="n">SUMMARY</span><span class="p">:</span> <span class="n">Will</span> <span class="n">exit</span> <span class="k">if</span> <span class="n">TCMS_USERNAME</span> <span class="n">not</span> <span class="n">configured</span>
    <span class="n">GIVEN</span><span class="p">:</span> <span class="n">TCMS_USERNAME</span> <span class="n">is</span> <span class="n">empty</span>
    <span class="n">WHEN</span><span class="p">:</span> <span class="n">plugin</span> <span class="n">initializes</span>
    <span class="n">THEN</span><span class="p">:</span> <span class="nb">log</span> <span class="n">a</span> <span class="n">warning</span> <span class="n">message</span> <span class="n">and</span> <span class="n">exit</span>
    <span class="n">AND</span><span class="p">:</span> <span class="n">depending</span> <span class="n">on</span> <span class="n">the</span> <span class="n">test</span> <span class="n">runner</span> <span class="n">framework</span> <span class="n">set</span> <span class="n">exist</span> <span class="n">status</span> <span class="mi">1</span>


    <span class="n">SUMMARY</span><span class="p">:</span> <span class="n">Will</span> <span class="n">exit</span> <span class="k">if</span> <span class="n">TCMS_PASSWORD</span> <span class="n">not</span> <span class="n">configured</span>
    <span class="n">GIVEN</span><span class="p">:</span> <span class="n">TCMS_PASSWORD</span> <span class="n">is</span> <span class="n">empty</span>
    <span class="n">WHEN</span><span class="p">:</span> <span class="n">plugin</span> <span class="n">initializes</span>
    <span class="n">THEN</span><span class="p">:</span> <span class="nb">log</span> <span class="n">a</span> <span class="n">warning</span> <span class="n">message</span> <span class="n">and</span> <span class="n">exit</span>
    <span class="n">AND</span><span class="p">:</span> <span class="n">depending</span> <span class="n">on</span> <span class="n">the</span> <span class="n">test</span> <span class="n">runner</span> <span class="n">framework</span> <span class="n">set</span> <span class="n">exist</span> <span class="n">status</span> <span class="mi">1</span>


    <span class="n">SUMMARY</span><span class="p">:</span> <span class="n">Will</span> <span class="n">re</span><span class="o">-</span><span class="n">use</span> <span class="n">existing</span> <span class="n">TestPlan</span> <span class="k">if</span> <span class="n">configured</span>
    <span class="n">GIVEN</span><span class="p">:</span> <span class="n">TCMS_RUN_ID</span> <span class="n">environment</span> <span class="n">variable</span> <span class="n">is</span> <span class="n">not</span> <span class="n">empty</span>
    <span class="n">WHEN</span><span class="p">:</span> <span class="n">plugin</span> <span class="n">initializes</span>
    <span class="n">THEN</span><span class="p">:</span>  <span class="n">this</span> <span class="n">will</span> <span class="n">be</span> <span class="n">the</span> <span class="n">Current_TestRun</span> <span class="n">record</span> <span class="n">to</span> <span class="n">which</span> <span class="n">the</span> <span class="n">plugin</span> <span class="n">is</span>
           <span class="n">going</span> <span class="s">to</span> <span class="s">add</span> <span class="s">test</span> <span class="s">execution</span> <span class="s">results</span>
    <span class="n">AND</span><span class="p">:</span> <span class="n">Current_TestPlan</span> <span class="n">document</span> <span class="n">in</span> <span class="n">which</span> <span class="n">the</span> <span class="n">plugin</span> <span class="n">will</span>
           <span class="n">search</span> <span class="s">for</span> <span class="s">test</span> <span class="s">cases</span> <span class="s">becomes</span> <span class="s">Current_TestRun.plan</span>


    <span class="n">SUMMARY</span><span class="p">:</span> <span class="n">Will</span> <span class="n">create</span> <span class="n">new</span> <span class="n">TestPlan</span> <span class="o">&amp;</span> <span class="n">TestRun</span> <span class="k">if</span> <span class="n">TCMS_RUN_ID</span> <span class="n">not</span> <span class="n">configured</span>
    <span class="n">GIVEN</span><span class="p">:</span> <span class="n">TCMS_RUN_ID</span> <span class="n">environment</span> <span class="n">variable</span> <span class="n">is</span> <span class="n">empty</span>
    <span class="n">THEN</span><span class="p">:</span> <span class="n">plugin</span> <span class="n">will</span> <span class="n">create</span> <span class="n">a</span> <span class="n">new</span> <span class="n">TestPlan</span> <span class="n">in</span> <span class="n">Kiwi</span> <span class="n">TCMS</span> <span class="n">with</span> <span class="n">attributes</span><span class="p">:</span>
        <span class="n">name</span><span class="p">=</span><span class="s">&#39;Automated test plan for %(product)&#39;</span>
        <span class="n">product</span><span class="p">=</span><span class="s">&#39;%(product)&#39;</span>
        <span class="n">product_version</span><span class="p">=</span><span class="s">&#39;%(version)&#39;</span>
        <span class="n">type</span><span class="p">=</span><span class="s">&#39;Unit&#39;</span>
    <span class="n">WHERE</span><span class="p">:</span> <span class="c">%(product) is a placeholder for TCMS_PRODUCT==TRAVIS_REPO_SLUG==JOB_NAME</span>
           <span class="c">%(version) is a placeholder for TCMS_PRODUCT_VERSION==TRAVIS_COMMIT==TRAVIS_PULL_REQUEST_SHA==GIT_COMMIT</span>
    <span class="n">THEN</span><span class="p">:</span> <span class="n">plugin</span> <span class="n">will</span> <span class="n">crate</span> <span class="n">a</span> <span class="n">new</span> <span class="n">TestRun</span> <span class="n">in</span> <span class="n">Kiwi</span> <span class="n">TCMS</span> <span class="n">with</span> <span class="n">attributes</span><span class="p">:</span>
        <span class="n">summary</span><span class="p">=</span><span class="s">&#39;Automated test run ....&#39;</span>
        <span class="n">plan</span><span class="p">=</span><span class="n">Current</span> <span class="n">TestPlan</span>
        <span class="n">build</span><span class="p">=</span><span class="s">&#39;%(build)&#39;</span>
        <span class="n">manager</span><span class="p">=</span><span class="n">TCMS_USERNAME</span>
    <span class="n">WHERE</span><span class="p">:</span> <span class="c">%(build) is a placeholder for TCMS_BUILD==TRAVIS_BUILD_NUMBER==BUILD_NUMBER</span>
    <span class="n">Environment</span> <span class="s">variables</span> <span class="s">are</span> <span class="s">specified</span> <span class="s">in:</span>
    <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="p">.</span><span class="n">travis</span><span class="o">-</span><span class="n">ci</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">environment</span><span class="o">-</span><span class="n">variables</span>#<span class="n">default</span><span class="o">-</span><span class="n">environment</span><span class="o">-</span><span class="n">variables</span>
    <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">wiki</span><span class="p">.</span><span class="n">jenkins</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">display</span><span class="o">/</span><span class="n">JENKINS</span><span class="o">/</span><span class="n">Building</span><span class="o">+</span><span class="n">a</span><span class="o">+</span><span class="n">software</span><span class="o">+</span><span class="n">project</span>#<span class="n">Buildingasoftwareproject</span><span class="o">-</span><span class="n">belowJenkinsSetEnvironmentVariables</span>

    <span class="n">SUMMARY</span><span class="p">:</span> <span class="n">Will</span> <span class="n">not</span> <span class="n">create</span> <span class="n">duplicate</span> <span class="n">Product</span><span class="p">,</span> <span class="n">Version</span> <span class="o">&amp;</span> <span class="n">Build</span> <span class="k">if</span> <span class="n">they</span> <span class="n">already</span> <span class="n">exist</span>
    <span class="n">GIVEN</span><span class="p">:</span> <span class="n">TCMS_RUN_ID</span> <span class="n">is</span> <span class="n">not</span> <span class="n">configured</span>
    <span class="n">AND</span><span class="p">:</span> <span class="c">%(product) exists</span>
    <span class="n">AND</span><span class="p">:</span> <span class="c">%(version) exists</span>
    <span class="n">AND</span><span class="p">:</span> <span class="c">%(build) exists</span>
    <span class="n">WHEN</span><span class="p">:</span> <span class="n">plugin</span> <span class="n">tries</span> <span class="n">to</span> <span class="n">auto</span><span class="o">-</span><span class="n">create</span> <span class="n">TestPlan</span> <span class="n">and</span> <span class="n">TestRun</span>
    <span class="n">THEN</span><span class="p">:</span> <span class="n">plugin</span> <span class="n">will</span> <span class="n">re</span><span class="o">-</span><span class="n">use</span> <span class="c">%(product), %(version) and %(build) from the database</span>
    <span class="n">AND</span><span class="p">:</span> <span class="n">not</span> <span class="k">try</span> <span class="n">to</span> <span class="n">auto</span><span class="o">-</span><span class="n">create</span> <span class="n">them</span>


    <span class="n">SUMMARY</span><span class="p">:</span> <span class="n">Will</span> <span class="n">auto</span><span class="o">-</span><span class="n">create</span> <span class="n">Product</span><span class="p">,</span> <span class="n">Version</span> <span class="o">&amp;</span> <span class="n">Build</span> <span class="k">if</span> <span class="n">they</span> <span class="n">don</span><span class="o">&#39;</span><span class="n">t</span> <span class="n">exist</span>
    <span class="n">GIVEN</span><span class="p">:</span> <span class="n">TCMS_RUN_ID</span> <span class="n">is</span> <span class="n">not</span> <span class="n">configured</span>
    <span class="n">AND</span><span class="p">:</span> <span class="c">%(product) doesn&#39;t exist</span>
    <span class="n">AND</span><span class="p">:</span> <span class="c">%(version) doesn&#39;t exist</span>
    <span class="n">AND</span><span class="p">:</span> <span class="c">%(build) doesn&#39;t exist</span>
    <span class="n">WHEN</span><span class="p">:</span> <span class="n">plugin</span> <span class="n">tries</span> <span class="n">to</span> <span class="n">auto</span><span class="o">-</span><span class="n">create</span> <span class="n">TestPlan</span> <span class="n">and</span> <span class="n">TestRun</span>
    <span class="n">THEN</span><span class="p">:</span> <span class="c">%(product), %(version) and %(build) be created automatically</span>


    <span class="n">SUMMARY</span><span class="p">:</span> <span class="n">Unit</span> <span class="n">test</span> <span class="n">names</span> <span class="n">are</span> <span class="n">added</span> <span class="n">to</span> <span class="n">TestPlan</span>
    <span class="n">GIVEN</span><span class="p">:</span> <span class="n">we</span> <span class="n">have</span> <span class="n">good</span> <span class="n">plugin</span> <span class="n">configuration</span>
    <span class="n">WHEN</span><span class="p">:</span> <span class="n">plugin</span> <span class="n">loops</span> <span class="n">over</span> <span class="n">unit</span> <span class="n">tests</span> <span class="n">emitted</span> <span class="n">by</span> <span class="n">the</span> <span class="n">test</span> <span class="n">runner</span>
    <span class="n">THEN</span><span class="p">:</span> <span class="n">plugin</span> <span class="n">will</span> <span class="n">check</span> <span class="n">Current_TestPlan</span> <span class="k">for</span> <span class="n">a</span> <span class="n">TestCase</span> <span class="n">with</span> <span class="n">the</span> <span class="n">same</span> <span class="n">name</span>
    <span class="n">AND</span><span class="p">:</span> <span class="k">if</span> <span class="n">test</span> <span class="k">case</span> <span class="n">doesn</span><span class="o">&#39;</span><span class="n">t</span> <span class="n">exist</span> <span class="n">in</span> <span class="n">Current_TestPlan</span>
    <span class="n">THEN</span><span class="p">:</span> <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">added</span> <span class="n">to</span> <span class="n">Current_TestPlan</span>
    <span class="n">hint</span><span class="p">:</span> <span class="n">it</span> <span class="n">is</span> <span class="n">probably</span> <span class="n">best</span> <span class="n">to</span> <span class="n">process</span> <span class="n">all</span> <span class="n">unit</span> <span class="n">test</span> <span class="n">results</span> <span class="n">at</span> <span class="n">the</span> <span class="k">end</span>!


    <span class="n">SUMMARY</span><span class="p">:</span> <span class="n">Unit</span> <span class="n">test</span> <span class="n">names</span> <span class="n">are</span> <span class="n">added</span> <span class="n">to</span> <span class="n">TestRun</span>
    <span class="n">GIVEN</span><span class="p">:</span> <span class="n">we</span> <span class="n">have</span> <span class="n">good</span> <span class="n">plugin</span> <span class="n">configuration</span>
    <span class="n">WHEN</span><span class="p">:</span> <span class="n">plugin</span> <span class="n">loops</span> <span class="n">over</span> <span class="n">unit</span> <span class="n">tests</span> <span class="n">emitted</span> <span class="n">by</span> <span class="n">the</span> <span class="n">test</span> <span class="n">runner</span>
    <span class="n">THEN</span><span class="p">:</span> <span class="n">plugin</span> <span class="n">will</span> <span class="n">check</span> <span class="n">Current_TestRun</span> <span class="k">for</span> <span class="n">a</span> <span class="n">TestCaseRun</span> <span class="n">object</span> <span class="n">which</span> <span class="n">matches</span>
          <span class="n">the</span> <span class="s">current</span> <span class="s">unit</span> <span class="s">test</span> <span class="s">name</span>
    <span class="n">hint</span><span class="p">:</span> <span class="p">(</span><span class="n">or</span> <span class="n">Current_TestCase</span> <span class="n">object</span> <span class="n">from</span> <span class="n">previous</span> <span class="n">scenario</span><span class="p">,</span> <span class="n">depending</span> <span class="n">on</span> <span class="n">implementation</span><span class="p">)</span>
    <span class="n">AND</span><span class="p">:</span> <span class="k">if</span> <span class="n">such</span> <span class="n">TestCaseRun</span> <span class="n">doesn</span><span class="o">&#39;</span><span class="n">t</span> <span class="n">exist</span> <span class="n">in</span> <span class="n">Current_TestRun</span>
    <span class="n">THEN</span><span class="p">:</span> <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">added</span> <span class="n">to</span> <span class="n">Current_TestRun</span>
    <span class="n">hint</span><span class="p">:</span> <span class="n">it</span> <span class="n">is</span> <span class="n">probably</span> <span class="n">best</span> <span class="n">to</span> <span class="n">process</span> <span class="n">all</span> <span class="n">unit</span> <span class="n">test</span> <span class="n">results</span> <span class="n">at</span> <span class="n">the</span> <span class="k">end</span>!


    <span class="n">SUMMARY</span><span class="p">:</span> <span class="n">Current_TestRun</span> <span class="n">is</span> <span class="n">updated</span> <span class="n">with</span> <span class="n">unit</span> <span class="n">test</span> <span class="n">results</span>
    <span class="n">GIVEN</span><span class="p">:</span> <span class="n">we</span> <span class="n">have</span> <span class="n">good</span> <span class="n">plugin</span> <span class="n">configuration</span>
    <span class="n">WHEN</span><span class="p">:</span> <span class="n">plugin</span> <span class="n">loops</span> <span class="n">over</span> <span class="n">unit</span> <span class="n">tests</span> <span class="n">emitted</span> <span class="n">by</span> <span class="n">the</span> <span class="n">test</span> <span class="n">runner</span>
    <span class="n">THEN</span><span class="p">:</span> <span class="n">plugin</span> <span class="n">will</span> <span class="n">check</span> <span class="n">Current_TestRun</span> <span class="k">for</span> <span class="n">a</span> <span class="n">TestCaseRun</span> <span class="n">object</span> <span class="n">which</span> <span class="n">matches</span>
          <span class="n">the</span> <span class="s">current</span> <span class="s">unit</span> <span class="s">test</span> <span class="s">name</span>
    <span class="n">hint</span><span class="p">:</span> <span class="p">(</span><span class="n">or</span> <span class="n">Current_TestCase</span> <span class="n">object</span> <span class="n">from</span> <span class="n">previous</span> <span class="n">scenario</span><span class="p">,</span> <span class="n">depending</span> <span class="n">on</span> <span class="n">implementation</span><span class="p">)</span>
    <span class="n">AND</span><span class="p">:</span> <span class="k">if</span> <span class="n">TestCaseRun</span> <span class="n">object</span> <span class="n">exists</span> <span class="n">in</span> <span class="n">Current_TestRun</span>
    <span class="n">THEN</span><span class="p">:</span> <span class="n">its</span> <span class="n">status</span> <span class="n">will</span> <span class="n">be</span> <span class="n">updated</span> <span class="n">with</span> <span class="n">the</span> <span class="n">execution</span> <span class="n">result</span> <span class="n">coming</span> <span class="n">from</span> <span class="n">the</span> <span class="n">test</span> <span class="n">runner</span>
    <span class="n">hint</span><span class="p">:</span> <span class="n">it</span> <span class="n">is</span> <span class="n">probably</span> <span class="n">best</span> <span class="n">to</span> <span class="n">process</span> <span class="n">all</span> <span class="n">unit</span> <span class="n">test</span> <span class="n">results</span> <span class="n">at</span> <span class="n">the</span> <span class="k">end</span>!
</code></pre></div>


<p>Happy testing!</p>
        </div>
    </article>
    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2018/10/26/kiwi-tcms-api-performance-baseline/" rel="bookmark" title="Permalink to Kiwi TCMS API performance baseline">
                <h1 class="top-header">Kiwi TCMS API performance baseline</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Fri 26 October 2018
            </p>
        </div>

        <div class="content">
            <p>A friend from Red Hat sent me an email asking about Kiwi TCMS performance so I did
an experiment to establish a baseline.
For API requests I got <strong>7.5 req/sec or 130 msec/req</strong> which is
1.5x <a href="https://blog.github.com/2012-09-05-how-we-keep-github-fast/">slower than GitHub</a>!</p>
<p>I used <code>perf-script</code>
(<a href="https://github.com/kiwitcms/api-scripts/blob/master/perf-script">see here</a>)
to measure that. The script takes the first 250 test cases from our test suite
and on every execution creates a new TestPlan (1 API request), then creates
new test cases (250 requests), adds cases to test plan (250 requests),
creates new product build (1 API request), creates new TestRun (1 API request),
adds test cases to test run (250 requests) and finally updates the statuses
(250 requests).</p>
<p>A total of 1003 API requests are sent to Kiwi TCMS every time you start this script!
An example is available at <a href="https://public.tenant.kiwitcms.org/run/567/">TR #567</a>!</p>
<p>On localhost, running the development server (<code>./manage.py runserver</code>) with an
SQLite database I got:</p>
<div class="highlight"><pre><span></span><code>$ <span class="nb">time</span> python perf-script

real    2m6.450s
user    0m1.069s
sys     0m0.331s

$ <span class="nb">time</span> python perf-script

real    2m7.472s
user    0m1.057s
sys     0m0.342s

$ <span class="nb">time</span> python perf-script

real    2m9.368s
user    0m1.072s
sys     0m0.351s

$ <span class="nb">time</span> python perf-script

real    2m9.197s
user    0m1.050s
sys     0m0.353s
</code></pre></div>


<p>This measures at 120 msec/req or 7.85 req/sec!</p>
<p><a href="https://public.tenant.kiwitcms.org/login/github-app/">public.tenant.kiwitcms.org</a> is running on an
<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/burstable-performance-instances.html#burstable-performance-instances-hardware">AWS t2.micro</a>
instance (via docker-compose) with the default <code>centos/mariadb</code> image!
No extra settings or changes. I used the same computer over a WiFi
connection and a pretty standard home-speed Internet connection. Times are:</p>
<div class="highlight"><pre><span></span><code>$ <span class="nb">time</span> python perf-script

real    2m18.983s
user    0m1.175s
sys     0m0.095s

$ <span class="nb">time</span> python perf-script

real    2m25.937s
user    0m1.156s
sys     0m0.108s

$ <span class="nb">time</span> python perf-script

real    2m24.120s
user    0m1.102s
sys     0m0.098s

$ <span class="nb">time</span> python perf-script

real    2m21.521s
user    0m1.154s
sys     0m0.091s
</code></pre></div>


<p>This measures at 140 sec/req or 7.05 req/sec!</p>
<p>Note: since I am using Python 3.6 I had to modify the file
<code>/opt/rh/rh-python36/root/lib64/python3.6/ssl.py</code> to read:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Used by http.client if no context is explicitly passed.</span>
<span class="n">_create_default_https_context</span> <span class="o">=</span> <span class="n">_create_unverified_context</span> <span class="c1"># this disables HTTPS cert validation</span>
</code></pre></div>


<p>The issue has been reported in
<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1643454">RHBZ #1643454</a></p>
<p>Happy testing!</p>
        </div>
    </article>
    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2018/10/12/kiwi-tcms-team-updates/" rel="bookmark" title="Permalink to Kiwi TCMS team updates">
                <h1 class="top-header">Kiwi TCMS team updates</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Fri 12 October 2018
            </p>
        </div>

        <div class="content">
            <p>I am happy to announce that <a href="/team/">our team</a> is steadily growing!
As we work through our <a href="/blog/kiwi-tcms-team/2018/01/22/kiwi-tcms-roadmap-for-2018/">roadmap</a>,
<a href="/blog/atodorov/2018/07/25/mid-year-roadmap-status-report/">status update here</a>, and
on-board new team members I start to feel the need for a bit more structure
and organization behind the scenes. I also wish for consistent contributions
to the project (commit early, commit often) so I can better estimate the resources
that we have!</p>
<p>I am also actively discussing Kiwi TCMS with lots of people at various conferences
and generate many ideas for the future. The latest SEETEST in Belgrade was particularly
fruitful. Some of these ideas are pulling into different directions and I need help
to keep them under control!</p>
<p>Development-wise sometimes I lose track of what's going on and who's doing what between
working on Kiwi TCMS, preparing for conferences and venues to promote the project,
doing code review of other team members, trying not to forget to check-in on
progress (especially by interns), recruiting fresh blood and thinking about
the overall future of the project. Our user base is growing and there are days
where I feel like everything is happening at once or that something
needs to be implemented ASAP (which is usually true anyway)!</p>
<p><img class="rounded" src="/images/team/rstankova.jpg"></p>
<p>Meet Rayna Stankova in the role of our team coach!
Reny is a director for Women Who Code Sofia, senior QA engineer at VMware,
mentor with CoderDojo Bulgaria and a long-time friend of mine.
Although she is an experienced QA in her own right she will be contributing
to the people side of Kiwi TCMS and less so technically!</p>
<p>Her working areas will be planning and organization:</p>
<ul>
<li>help us (re)define the project vision and goals</li>
<li>work with us on roadmaps and action plans so we can meet
  the project goals faster</li>
<li>help us (self) organize so that we are more efficient,
  including checking progress and blockers (aka enforcer) and
  meet the aforementioned consistency point</li>
<li>serve as our professional coach, motivator and somebody who will
  take care of team health (yes I really suck at motivating others)</li>
</ul>
<p>and generally serving as another very experienced member of the team!</p>
<p>We did a quick brainstorming yesterday and started to produce results
(#smileyface)! We do have a team docs space to share information
(non-public for now, will open it gradually as we grow) and came up
with the idea to use Kiwi TCMS as a check-list for our on-boarding/internship
process!</p>
<p>I don't know how it will play out but I do expect from the
team to self-improve, be inspired, become more focused and more productive!
<strong>All of this also applies to myself, even more so!</strong></p>
<h2>Existing team members progress</h2>
<p>Last year we started with 2 existing team members (Tony and myself) and 3
new interns (Ivo, Kaloyan and Tseko) who built this website!</p>
<p>Tony is the #4 contributor to Kiwi TCMS in
terms of <a href="https://github.com/kiwitcms/Kiwi/graphs/contributors">number of commits</a>
and is on track to surpass one of the original authors (before Kiwi TCMS was forked)!
He's been working mostly on internal refactoring and resolving the thousands
of pylint errors that we had (down to around 500 I think). This summer Tony and I
visited the OSCAL conference in Tirana and hosted an info booth for the project.</p>
<p>Ivo is the #5 contributor in terms of numbers of commits. He did learn very
quickly and is working on getting rid of the remaining pylint errors. His ability
to adapt and learn is quite impressive actually. Last month he co-hosted a
git workshop at HackConf, a 1000+ people IT event in Sofia.</p>
<p>Kaloyan did most of the work on our website initially (IIRC).
Now he is studying in the Netherlands
and not active on the project. We are working to reboot his on-boarding
and I'm hoping he will find the time to contribute to Kiwi TCMS regularly.</p>
<p>From the starting team only Tseko decided to move on to other ventures after
he contributed to the website.</p>
<h2>Internship program</h2>
<p>At Kiwi TCMS we have a set of training
programs that teach all the necessary technical skills before we let anyone
actively work on the project, let alone become a team member.</p>
<p>Our new interns are Denitsa Uzunova and Desislava Koleva. Both of them are
coming from Vratsa Software Community and were mentors at the recently held
CodeWeek hackathon in their home city! I wish them fast learning and good luck!</p>
<p>Happy testing!</p>
        </div>
    </article>
    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2018/09/07/how-to-add-api-logging-for-kiwi-tcms/" rel="bookmark" title="Permalink to How to add API logging for Kiwi TCMS">
                <h1 class="top-header">How to add API logging for Kiwi TCMS</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Fri 07 September 2018
            </p>
        </div>

        <div class="content">
            <p>In this blog post I will show more ways to customize Kiwi TCMS by adding
logging capabilities to the API backend. Indeed this is a feature that
our team deemed not required for upstream and was removed in
<a href="https://github.com/kiwitcms/Kiwi/pull/436">PR #436</a>.</p>
<p>Start by creating the following directory structure:</p>
<div class="highlight"><pre><span></span><code><span class="err">    api_logging/</span>
<span class="err">        __init__.py</span>
<span class="err">        handlers.py</span>
<span class="err">        models.py</span>
</code></pre></div>


<p>This is a small Django application that will log every call to the API backend.
Each file looks like this:</p>
<div class="highlight"><pre><span></span><code>    <span class="c1"># models.py contains DB schema for your new table</span>
    <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
    <span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>

    <span class="k">class</span> <span class="nc">ApiCallLog</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
        <span class="n">executed_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                 <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">CASCADE</span><span class="p">)</span>
        <span class="n">method</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">)</span>
</code></pre></div>


<p>Then</p>
<div class="highlight"><pre><span></span><code>    <span class="c1"># handlers.py overrides the RPC handlers coming from django-modernrpc</span>
    <span class="kn">from</span> <span class="nn">modernrpc</span> <span class="kn">import</span> <span class="n">handlers</span>

    <span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
    <span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">get_user_model</span>

    <span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">ApiCallLog</span>

    <span class="k">def</span> <span class="nf">log_call</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">method_name</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Log an RPC call to the database or stdout in DEBUG mode. &quot;&quot;&quot;</span>
        <span class="n">request_user</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">request_user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">:</span>
            <span class="c1"># create an anonymous user object for logging purposes</span>
            <span class="n">request_user</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span>
                <span class="n">username</span><span class="o">=</span><span class="s1">&#39;Anonymous&#39;</span><span class="p">,</span>
                <span class="n">is_active</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">method_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">method_name</span> <span class="o">=</span> <span class="s1">&#39;--- method_name missing ---&#39;</span>

        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;API call:: user: </span><span class="si">{0}</span><span class="s1">, method: </span><span class="si">{1}</span><span class="s1">, args: </span><span class="si">{2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">request_user</span><span class="p">,</span>
                <span class="n">method_name</span><span class="p">,</span>
                <span class="n">args</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ApiCallLog</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
                <span class="n">user</span><span class="o">=</span><span class="n">request_user</span><span class="p">,</span>
                <span class="n">method</span><span class="o">=</span><span class="n">method_name</span><span class="p">,</span>
                <span class="n">args</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>

    <span class="k">class</span> <span class="nc">XMLRPCHandler</span><span class="p">(</span><span class="n">handlers</span><span class="o">.</span><span class="n">XMLRPCHandler</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">encoding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">encoding</span> <span class="ow">or</span> <span class="s1">&#39;utf-8&#39;</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>
            <span class="n">params</span><span class="p">,</span> <span class="n">method_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

            <span class="n">log_call</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">method_name</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">process_request</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">JSONRPCHandler</span><span class="p">(</span><span class="n">handlers</span><span class="o">.</span><span class="n">JSONRPCHandler</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">process_single_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">):</span>
            <span class="n">method_name</span> <span class="o">=</span> <span class="n">payload</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;method&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="n">params</span> <span class="o">=</span> <span class="n">payload</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;params&#39;</span><span class="p">)</span>

            <span class="n">log_call</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">method_name</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">process_single_request</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
</code></pre></div>


<p><strong>NOTE:</strong>
You will have to execute <code>./manage.py makemigrations api_logging</code> to create the
initial migration for Django. This could be easier if you place the above directory
into existing Django application or craft the migration file by hand!</p>
<p>The last thing you want to do is create a <code>local_settings.py</code> file which will override
Kiwi TCMS defaults:</p>
<div class="highlight"><pre><span></span><code>    <span class="c1"># local_settings.py</span>
    <span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>

    <span class="n">settings</span><span class="o">.</span><span class="n">INSTALLED_APPS</span> <span class="o">+=</span> <span class="p">[</span>
        <span class="s1">&#39;api_logging&#39;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="n">MODERNRPC_HANDLERS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;api_logging.handlers.XMLRPCHandler&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;api_logging.handlers.JSONRPCHandler&#39;</span><span class="p">]</span>
</code></pre></div>


<p>Then place everything in <code>Dockerfile</code> like so:</p>
<div class="highlight"><pre><span></span><code>    <span class="k">FROM</span> <span class="n">kiwitcms</span><span class="o">/</span><span class="n">kiwi</span>

    <span class="k">COPY</span> <span class="p">.</span><span class="o">/</span><span class="n">api_logging</span><span class="o">/</span> <span class="o">/</span><span class="n">venv</span><span class="o">/</span><span class="n">lib64</span><span class="o">/</span><span class="n">python3</span><span class="p">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">api_logging</span><span class="o">/</span>
    <span class="k">COPY</span> <span class="n">local_settings</span><span class="p">.</span><span class="n">py</span> <span class="o">/</span><span class="n">venv</span><span class="o">/</span><span class="n">lib64</span><span class="o">/</span><span class="n">python3</span><span class="p">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">tcms</span><span class="o">/</span><span class="n">settings</span><span class="o">/</span>
</code></pre></div>


<p>Kiwi TCMS will import your <code>local_settings.py</code> and enable the logging application.
Now build your customized Docker image and use it for deployment!</p>
<p>Happy testing!</p>
        </div>
    </article>
    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2018/08/06/how-to-override-templates-for-kiwi-tcms/" rel="bookmark" title="Permalink to How to override templates for Kiwi TCMS">
                <h1 class="top-header">How to override templates for Kiwi TCMS</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Mon 06 August 2018
            </p>
        </div>

        <div class="content">
            <p>This is the first publication in our customization series. It will show you
how to override any template used by Kiwi TCMS. As an example we will override
the email template that is used when registering new account. By default the
email text looks like this:</p>
<div class="highlight"><pre><span></span><code><span class="x">    Welcome </span><span class="cp">{{</span> <span class="nv">user</span> <span class="cp">}}</span><span class="x">,</span>
<span class="x">    thank you for signing up for an </span><span class="cp">{{</span> <span class="nv">site_domain</span> <span class="cp">}}</span><span class="x"> account!</span>

<span class="x">    To activate your account, click this link:</span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">confirm_url</span> <span class="cp">}}</span><span class="x"></span>
</code></pre></div>


<p><a href="https://public.tenant.kiwitcms.org/login/github-app/">https://public.tenant.kiwitcms.org</a>
runs a custom Docker image based on
<code>kiwitcms/kiwi</code>. For this image the confirmation email looks like this</p>
<div class="highlight"><pre><span></span><code><span class="x">    Welcome </span><span class="cp">{{</span> <span class="nv">user</span> <span class="cp">}}</span><span class="x">,</span>
<span class="x">    thank you for signing up for our Kiwi TCMS demo!</span>

<span class="x">    To activate your account, click this link:</span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">confirm_url</span> <span class="cp">}}</span><span class="x"></span>

<span class="x">    GDPR no longer allows us to automatically subscribe you to</span>
<span class="x">    our newsletter. If you wish to keep in touch and receive emails</span>
<span class="x">    with news and updates around Kiwi TCMS please subscribe at:</span>
<span class="x">    https://kiwitcms.us17.list-manage.com/subscribe/post?u=9b57a21155a3b7c655ae8f922&amp;id=c970a37581</span>

<span class="x">    --</span>
<span class="x">    Happy testing!</span>
<span class="x">    The Kiwi TCMS team</span>
<span class="x">    http://kiwitcms.org</span>
</code></pre></div>


<p>The file that we want to override is <code>tcms/templates/email/confirm_registration.txt</code>.</p>
<p>Create a local directory (git repository) which will hold customization configuration
and create a file named <code>templates.d/email/confirm_registration.txt</code> with your text!</p>
<p>Next you want to make this file available inside your docker image so your <code>Dockerfile</code>
should look like this:</p>
<div class="highlight"><pre><span></span><code>    <span class="k">FROM</span> <span class="n">kiwitcms</span><span class="o">/</span><span class="n">kiwi</span>

    <span class="k">COPY</span> <span class="p">.</span><span class="o">/</span><span class="n">templates</span><span class="p">.</span><span class="n">d</span><span class="o">/</span> <span class="o">/</span><span class="n">venv</span><span class="o">/</span><span class="n">lib64</span><span class="o">/</span><span class="n">python3</span><span class="p">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">tcms</span><span class="o">/</span><span class="n">overridden_templates</span><span class="o">/</span>
    <span class="k">COPY</span> <span class="n">local_settings</span><span class="p">.</span><span class="n">py</span> <span class="o">/</span><span class="n">venv</span><span class="o">/</span><span class="n">lib64</span><span class="o">/</span><span class="n">python3</span><span class="p">.</span><span class="mi">6</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">tcms</span><span class="o">/</span><span class="n">settings</span><span class="o">/</span>
</code></pre></div>


<p>where <code>local_settings.py</code> contains</p>
<div class="highlight"><pre><span></span><code>    <span class="kn">import</span> <span class="nn">os</span>
    <span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>

    <span class="n">settings</span><span class="o">.</span><span class="n">TEMPLATES</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;DIRS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">TCMS_ROOT_PATH</span><span class="p">,</span> <span class="s1">&#39;overridden_templates&#39;</span><span class="p">))</span>
</code></pre></div>


<p>The following code states <em>instruct Django to look into <code>overridden_templates</code> first and
use any templates it finds there; also make my files available in that specific location
inside the docker image</em>.</p>
<p>This approach can be used for all templates that you wish to override. Take into
account that file names must match (Django searches templates by directory path).
Now build your customized Docker image and use that for deployment!</p>
<p>Happy testing!</p>
        </div>
    </article>
    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2018/07/30/how-to-backup-docker-volumes-for-kiwi-tcms/" rel="bookmark" title="Permalink to How to backup Docker volumes for Kiwi TCMS">
                <h1 class="top-header">How to backup Docker volumes for Kiwi TCMS</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Mon 30 July 2018
            </p>
        </div>

        <div class="content">
            <p>When you start Kiwi TCMS by running <code>docker-compose up</code>
(see <a href="http://kiwitcms.readthedocs.io/en/latest/installing_docker.html#start-docker-compose">here</a>)
it will automatically create 2 volumes: <code>kiwi_db_data</code> and <code>kiwi_uploads</code>.
This blog post will outline how to backup these docker volumes.</p>
<h2>Backing up the database</h2>
<p>Kiwi TCMS is a Django application and the <code>manage.py</code> command provides an easy way
to dump and load the database contents. To export all contents on your docker host
execute:</p>
<div class="highlight"><pre><span></span><code><span class="err">docker exec -it kiwi_web /Kiwi/manage.py dumpdata --all --indent 2 &gt; database.json</span>
</code></pre></div>


<p>This will create a file named <code>database.json</code> in the current directory, outside of the
running container!</p>
<p>You can restore the database contents by using the following commands:</p>
<div class="highlight"><pre><span></span><code><span class="err"># delete data from all tables</span>
<span class="err">docker exec -it kiwi_web /bin/bash -c &#39;/Kiwi/manage.py sqlflush | /Kiwi/manage.py dbshell&#39;</span>
<span class="err"># then reload the existing data</span>
<span class="err">cat database.json | docker exec -i kiwi_web /Kiwi/manage.py loaddata --format json -</span>
</code></pre></div>


<p><strong>NOTE:</strong> depending on your scenario you may want to remove the existing volume
(<code>docker-compose down &amp;&amp; docker volume rm kiwi_db_data</code>) and re-create the
DB schema (<code>/Kiwi/manage.py migrate</code>) before restoring the contents!</p>
<p><strong>WARNING</strong>: the above steps are applicable to Kiwi TCMS 5.1 or above. On earlier
versions <code>manage.py</code> will fail due to various issues.</p>
<h2>Backing up multi-tenant database</h2>
<p>The <a href="https://github.com/kiwitcms/tenants">kiwitcms-tenant</a> add-on depends on the
PostgreSQL database. It will create multiple DB schemas, one per tenant. To backup
all tenants use the following command:</p>
<div class="highlight"><pre><span></span><code><span class="err">docker exec -i kiwi_db /bin/bash -c &#39;pg_dump --dbname=kiwi -F c&#39; &gt; backup.bak</span>
</code></pre></div>


<p>This will create a file in the PostgreSQL custom database dump format which
contains all data and schema definitions. That is a binary file which can be read
with the <code>pg_restore</code> command.</p>
<p>To [drop and] restore the entire multi-tenant database:</p>
<div class="highlight"><pre><span></span><code><span class="err">docker exec -i kiwi_db /bin/bash -c &#39;psql -c &quot;DROP DATABASE IF EXISTS kiwi;&quot;&#39;</span>
<span class="err">cat backup.bak | docker exec -i kiwi_db /bin/bash -c &#39;pg_restore --dbname=template1 -vcC&#39;</span>
</code></pre></div>


<p>To [drop and] restore an individual tenant:</p>
<div class="highlight"><pre><span></span><code><span class="n">docker</span> <span class="k">exec</span> <span class="o">-</span><span class="n">it</span> <span class="n">kiwi_web</span> <span class="o">/</span><span class="n">Kiwi</span><span class="o">/</span><span class="n">manage</span><span class="p">.</span><span class="n">py</span> <span class="n">dbshell</span>

<span class="n">kiwi</span><span class="o">=&gt;</span> <span class="k">DROP</span> <span class="k">SCHEMA</span> <span class="err">$</span><span class="n">tenant_name</span> <span class="k">CASCADE</span><span class="p">;</span>
<span class="p">....</span>
<span class="k">DROP</span> <span class="k">SCHEMA</span>
<span class="n">kiwi</span><span class="o">=&gt;</span> <span class="k">CREATE</span> <span class="k">SCHEMA</span> <span class="err">$</span><span class="n">tenant_name</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">SCHEMA</span>
<span class="n">kiwi</span><span class="o">=&gt;</span><span class="n">Ctrl</span><span class="o">+</span><span class="n">D</span>

<span class="n">cat</span> <span class="n">backup</span><span class="p">.</span><span class="n">bak</span> <span class="o">|</span> <span class="n">docker</span> <span class="k">exec</span> <span class="o">-</span><span class="n">i</span> <span class="n">kiwi_db</span> <span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">bash</span> <span class="o">-</span><span class="k">c</span> <span class="s1">&#39;pg_restore --dbname=kiwi -v --schema $tenant_name&#39;</span>
</code></pre></div>


<p><strong>WARNING:</strong> <code>sqlflush | dbshell</code> will not work when you have multiple DB schemas so you must use
the PostgreSQL database shell to manipulate the contents of the database!</p>
<h2>Backing up file uploads</h2>
<p>Uploaded files can easily be backed up with:</p>
<div class="highlight"><pre><span></span><code><span class="err">docker exec -i kiwi_web /bin/tar -cP /Kiwi/uploads &gt; uploads.tar</span>
</code></pre></div>


<p>and then restored:</p>
<div class="highlight"><pre><span></span><code><span class="err">cat uploads.tar | docker exec -i kiwi_web /bin/tar -x</span>
</code></pre></div>


<p>You may also try the <code>rsync</code> command but be aware that it is not installed
by default!</p>
<p>The same approach may be used to backup <code>/var/lib/mysql/</code> from the <code>kiwi_db</code>
container.</p>
<h2>Backing up multi-tenant uploads</h2>
<p>By default multi-tenant file uploads are stored under <code>/Kiwi/uploads/tenant/$tenant_name</code>.
You can archive all contents with the same procedure above. If you wish to restore
files per tenant you will have to upload the <code>$tenant_name</code> directory into the
docker volume.</p>
<h2>Alternatives</h2>
<p>By default both docker volumes created for Kiwi TCMS use the <code>local</code> driver
and are available under <code>/var/lib/docker/volumes/&lt;volume_name&gt;</code> on the host
running your containers. You can try backing them up from there as well.</p>
<p>Another alternative is to use the
<a href="https://www.projectatomic.io/blog/2016/05/docker-lvm-plugin/">docker-lvm-plugin</a>
and create these volumes as LVM2 block devices. Then use
<code>lvcreate -s</code> command to create a snapshot volume. For more information see
<a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/logical_volume_manager_administration/index#snapshot_volumes">chapter 2.3.5. Snapshot Volumes</a>
from the LVM Administrator Guide for Red Hat Enterprise Linux 7.</p>
<p>Happy testing!</p>
        </div>
    </article>
    <article class="blog-list">
        <div class="header">
            <a href="/blog/atodorov/2018/07/25/mid-year-roadmap-status-report/" rel="bookmark" title="Permalink to Mid-year roadmap status report">
                <h1 class="top-header">Mid-year roadmap status report</h1>
            </a>

            <p class="post-meta">Posted by
                    <a href="/blog/atodorov/">Alexander Todorov</a>
                on Wed 25 July 2018
            </p>
        </div>

        <div class="content">
            <p>Hello everyone, in this article I will outline the progress that the Kiwi TCMS
team has made towards achieving the goals on our
<a href="/blog/kiwi-tcms-team/2018/01/22/kiwi-tcms-roadmap-for-2018/">roadmap</a>.</p>
<h2>Make code easier to maintain</h2>
<p><em>Status: moderate progress</em></p>
<p>Initially <a href="https://codeclimate.com/github/kiwitcms/Kiwi">CodeClimate</a> reported
a "D" rating with a 1 year estimated effort. Now it is still on "D" rating with
a 7 months estimated effort to bring the project back in shape.
Code smells have dropped from 600+ to 418, duplications have been reduced from 600+ to 359!
At the same time technical debt ratio has been decreased from 32,5% to 21,6% and
little over 10000 lines of code have been removed from the source code.
Checkout
<a href="https://codeclimate.com/github/kiwitcms/Kiwi/trends/technical_debt">the stats</a>
for more info!</p>
<h2>Use pylint and pylint-django</h2>
<p><em>Status: good progress</em></p>
<p>Both pylint and pylint-django have been integrated into our CI workflow. There are even
a few custom built plugins that we use. The number of issues reported is down to around 900
from 4000+ initially. The cleanup has been lead by <a href="https://github.com/asankov">Anton Sankov</a>
with help from <a href="https://github.com/ivo0126">Ivaylo Ivanov</a> and myself.</p>
<h2>Render HTML, return JSON</h2>
<p><em>Status: no progress</em></p>
<p>Several views were probably modified to return pure JSON in the meantime but we've not
done any targeted work to resolve this issue.</p>
<h2>Submit forms, post JSON, GET clean URLs</h2>
<p><em>Status: no progress</em></p>
<p>Same as above, not much has been done in this area.</p>
<h2>API layer</h2>
<p><em>Status: complete</em></p>
<p>After Kiwi TCMS v4.0 the server side API has been reorganized and updated
to follow the model/method names used internally.</p>
<p>After the recent version 5.0 the client side API library has been stripped
to its most basic form so that you can work directly with the responses from
the server.</p>
<p>There is no more duplication and ambiguity in names because there isn't
a lot of code left!</p>
<h2>Documentation</h2>
<p><em>Status: moderate progress, dropped</em></p>
<p>All RPC methods have been documented! The rest of the internals will be documented
as we go along.</p>
<h2>No vendored JavaScript libraries</h2>
<p><em>Status: moderate progress</em></p>
<p>Several JavaScript libraries have been removed but we still carry around jQuery
and Handlebars.js. No work has been done to convert Kiwi TCMS to use the jQuery
version provided with Django.</p>
<h2>Less HTML templates with better organization</h2>
<p><em>Status: minimal progress</em></p>
<p>There are still over 100 HTML templates in Kiwi TCMS. Some of the HTML templates
have been merged together, some email templates have been refactored and marked
as translatable but the majority of them have not been updated for a long time.</p>
<h2>Modern interface with Patternfly</h2>
<p><em>Status: no progress</em></p>
<h2>JavaScript updates and front-end testing</h2>
<p><em>Status: small progress</em></p>
<p>A number of JavaScript functions have been refactored and removed during the
past few releases but there are still thousands of lines of code left to deal with.</p>
<h2>Community efforts</h2>
<p><em>Status: moderate progress</em></p>
<p>We are seeing a steady stream of new users registered on
<a href="https://public.tenant.kiwitcms.org/login/github-app/">https://public.tenant.kiwitcms.org</a> and
there are several active contributors (issues, translations).</p>
<p>Kiwi TCMS was represented at OSCAL Tirana, DjangoCon Heidelberg and PyCon Prague!
We're planning to attend HackConf and OpenFest in Sofia by the end of the year.</p>
<p>Happy testing!</p>
        </div>
    </article>

<section id="pagination">
        <p>
            Page 1 / 1
        </p>
</section>
</section>

        <footer>
            <img src="/theme/images/Kiwi-TCMS-logo-footer.svg" alt="">
            <div class="legal">
                <p>Kiwi TCMS is collecting donations via <a href="https://opencollective.com/kiwitcms">Open Collective</a>.</p>
                <p>Except where otherwise noted, content on this site is licensed under a
                    <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International license.</a>
                </p>
                <p><a href="/legal/">Legal information</a></p>
            </div>
            <div class="footer-block fl-gh">
                <i></i>
                <h3>Contribute</h3>
                <a href="https://github.com/kiwitcms/Kiwi">/kiwitcms</a>
            </div>

            <div class="footer-block fl-tw">
                <i></i>
                <h3>Follow</h3>
                <a href="https://twitter.com/KiwiTCMS">@KiwiTCMS</a>
            </div>
            <div class="footer-block fl-yt">
                <i></i>
                <h3>Watch</h3>
                <a href="https://www.youtube.com/channel/UCC0KsZRFkF8nhPnES8G-KYw/videos">Kiwi TCMS</a>
            </div>
            <div class="footer-block fl-fb">
                <i></i>
                <h3>Like and share</h3>
                <a href="https://facebook.com/kiwitcms">/kiwitcms</a>
            </div>

            <div class="footer-block mail">
                <i></i>
                <h3>Join our newsletter.</h3>
                <p>Project news only, GDPR compliant.</p>
                <a href="https://kiwitcms.us17.list-manage.com/subscribe/post?u=9b57a21155a3b7c655ae8f922&amp;id=c970a37581" class="btn ghost-btn">Sign me up</a>
            </div>
        </footer>

        <script type="text/javascript" src="/theme/scripts/toggle.js"></script>



            <!-- Google analytics -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-113881636-1"></script>
            <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){
                    dataLayer.push(arguments);
                }
                gtag('js', new Date());
                gtag('config', 'UA-113881636-1');
            </script>
    </body>
</html>